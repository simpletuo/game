window.__require=function e(t,o,n){function r(i,c){if(!o[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var p=o[i]={exports:{}};t[i][0].call(p.exports,function(e){return r(t[i][1][e]||e)},p,p.exports,e,t,o,n)}return o[i].exports}for(var a="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({AoeSkillFire:[function(e,t,o){"use strict";cc._RF.push(t,"80fc92z0xFAtajNTp+EO8GU","AoeSkillFire");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.AoeSkillFire=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fireDragonArr=[],t.fireBallArr=[],t._movePosArr=[cc.v2(-54,-62),cc.v2(57,-72),cc.v2(11.5,0)],t}return r(t,e),t.prototype.onEnable=function(){this.fireAni()},t.prototype.fireAni=function(){for(var e=this,t=function(t){cc.tween(e.fireBallArr[t]).delay(.07*t).call(function(){e.fireBallArr[t].active=!0}).to(.15,{position:cc.v3(e._movePosArr[t])}).call(function(){e.fireDragonArr[t].playAnimation("quntihuo",1),e.fireBallArr[t].active=!1}).start()},o=0;o<this.fireBallArr.length;o++)t(o)},a([s({type:dragonBones.ArmatureDisplay,tooltip:"\u706b\u7403\u52a8\u753b"})],t.prototype,"fireDragonArr",void 0),a([s({type:cc.Node,tooltip:"\u706b\u7403\u56fe\u7247\u6570\u7ec4"})],t.prototype,"fireBallArr",void 0),a([c],t)}(cc.Component);o.AoeSkillFire=l,cc._RF.pop()},{}],AoeSkillIce:[function(e,t,o){"use strict";cc._RF.push(t,"05421PmsO9CvJ75OsQqB6/U","AoeSkillIce");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.AoeSkillIce=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iceDragonArr=[],t.iceArr=[],t._movePosArr=[cc.v2(-18.5,132.5),cc.v2(50.5,122.5),cc.v2(120.5,112.5)],t}return r(t,e),t.prototype.onEnable=function(){this.iceAni()},t.prototype.iceAni=function(){for(var e=this,t=function(t){cc.tween(e.iceArr[t]).delay(.08*t).call(function(){e.iceArr[t].active=!0}).to(.15,{position:cc.v3(e._movePosArr[t])}).call(function(){e.iceDragonArr[t].playAnimation("quntibing",1),e.iceArr[t].active=!1}).start()},o=0;o<this.iceArr.length;o++)t(o)},a([s({type:dragonBones.ArmatureDisplay,tooltip:"\u51b0\u7206\u52a8\u753b"})],t.prototype,"iceDragonArr",void 0),a([s({type:cc.Node,tooltip:"\u51b0\u67f1\u56fe\u7247\u6570\u7ec4"})],t.prototype,"iceArr",void 0),a([c],t)}(cc.Component);o.AoeSkillIce=l,cc._RF.pop()},{}],AoeSkillThunder:[function(e,t,o){"use strict";cc._RF.push(t,"fb3e9jqS9tJm4ZS81NHpI3Y","AoeSkillThunder");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.AoeSkillThunder=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.thunderDragon=null,t}return r(t,e),t.prototype.onEnable=function(){var e=this;this.scheduleOnce(function(){e.thunderDragon.playAnimation("quntilei",1)},.3)},a([s({type:dragonBones.ArmatureDisplay,tooltip:"\u96f7\u52a8\u753b"})],t.prototype,"thunderDragon",void 0),a([c],t)}(cc.Component);o.AoeSkillThunder=l,cc._RF.pop()},{}],Castle:[function(e,t,o){"use strict";cc._RF.push(t,"9018b/yrw5CaLvfQ7PJEZ0z","Castle");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.Castle=void 0;var i=e("../../Script/GameDataCenter"),c=e("../../Script/GameManager"),s=e("../../Script/UIManager"),l=e("../Script/LevelConfig"),p=cc._decorator,d=p.ccclass,y=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.roomPre=null,t.roomManager=null,t.top=null,t.castleTopIconArr=[],t.type=0,t.tag=null,t.enemyCount=0,t}return r(t,e),t.prototype.onEnable=function(){cc.systemEvent.on(c.GameManager.EEventName.CASTLE_CHANGE,this.onRoomDownEvent,this),cc.systemEvent.on(c.GameManager.EEventName.ENEMY_DIE,this.onEnemyReduceEvent,this),cc.systemEvent.on("PASS_LEVEL",this.checkGameState,this),cc.systemEvent.on("CASTLE_UP",this.onRoomUpEvent,this)},t.prototype.onDisable=function(){cc.systemEvent.off(c.GameManager.EEventName.CASTLE_CHANGE,this.onRoomDownEvent,this),cc.systemEvent.off(c.GameManager.EEventName.ENEMY_DIE,this.onEnemyReduceEvent,this),cc.systemEvent.off("PASS_LEVEL",this.checkGameState,this),cc.systemEvent.off("CASTLE_UP",this.onRoomUpEvent,this)},t.prototype.setData=function(e,t){this.enemyCount=e,this.type=t,this.top.y=this.node.height,this.type>0&&(this.top.getComponent(cc.Sprite).spriteFrame=this.castleTopIconArr[1])},t.prototype.onRoomDownEvent=function(){var e=this;if(null!=i.GameDataCenter.lastRoomTag&&(this.tag=i.GameDataCenter.lastRoomTag),this.type>0){if(i.GameDataCenter.curCastleIndex!=this.node.getComponent(cc.BoxCollider).tag)return;this.scheduleOnce(function(){null!=i.GameDataCenter.lastRoomTag&&(e.roomManager.children[i.GameDataCenter.lastRoomTag].getChildByName("enemyManager").childrenCount>0||e.roomScale(e.roomManager.children[i.GameDataCenter.lastRoomTag]))},.1)}},t.prototype.onRoomUpEvent=function(){this.roomUp()},t.prototype.roomScale=function(e){var t=this;e.group="default";var o=e.height;cc.tween(e).parallel(cc.tween().to(.3,{scale:0}),cc.tween().delay(.2).call(function(){t.castleDownOrUp(-o),cc.systemEvent.emit("CASTLE_UP");for(var e=i.GameDataCenter.lastRoomTag+1;e<t.roomManager.childrenCount;e++)t.roomDown(t.roomManager.children[e]),e==i.GameDataCenter.lastRoomTag+1&&i.GameDataCenter.colliderRoomIndex>i.GameDataCenter.lastRoomTag&&cc.systemEvent.emit(c.GameManager.EEventName.HERO_MOVE,-t.roomManager.children[e].height)})).start()},t.prototype.roomDown=function(e){var t=e,o=t.y-t.height;cc.tween(t).to(.5,{y:o}).start()},t.prototype.roomUp=function(){if(0==this.type){var e=this.roomManager.children[0].height;this.castleDownOrUp(e);for(var t=0;t<this.roomManager.childrenCount;t++)cc.tween(this.roomManager.children[t]).by(.5,{y:e}).start();var o=cc.instantiate(this.roomPre);o.scale=0,o.parent=this.roomManager,o.setPosition(0,e/2),cc.tween(o).to(.5,{scale:1}).start()}},t.prototype.castleDownOrUp=function(e){cc.tween(this.node).by(.5,{height:e}).start(),cc.tween(this.top).by(.5,{y:e}).start()},t.prototype.onEnemyReduceEvent=function(){var e=this;i.GameDataCenter.curCastleIndex==this.type&&(this.enemyCount--,this.enemyCount<=0&&(this.changeState(),this.scheduleOnce(function(){e.checkGameState()},.5)))},t.prototype.changeState=function(){var e=l.LevelConfig.map[i.GameDataCenter.chooseLevel-1].roomMess.length;if(i.GameDataCenter.curCastleIndex!=e-1&&(0==this.type&&(this.type=-1),i.GameDataCenter.curCastleIndex==this.type)){i.GameDataCenter.totleCastle++,this.type=0,this.node.getComponent(cc.BoxCollider).tag=0,this.top.getComponent(cc.Sprite).spriteFrame=this.castleTopIconArr[0];for(var t=0;t<this.roomManager.childrenCount;t++)this.roomManager.children[t].removeComponent(cc.BoxCollider)}},t.prototype.checkGameState=function(){var e=l.LevelConfig.map[i.GameDataCenter.chooseLevel-1].roomMess.length;if(cc.systemEvent.emit("ROOM_LIGHT_HIDE"),i.GameDataCenter.haveProp)if(i.GameDataCenter.curCastleIndex==e-1&&i.GameDataCenter.getFinalProp){if(c.GameManager.gameState==c.EGAMESTATE.WIN)return;c.GameManager.gameState=c.EGAMESTATE.WIN,this.top.getComponent(cc.Sprite).spriteFrame=this.castleTopIconArr[0],i.GameDataCenter.totleCastle++}else i.GameDataCenter.curCastleIndex==e-1||i.GameDataCenter.getFinalProp,s.UIManager.open("Game/SkillPanel");else if(i.GameDataCenter.curCastleIndex==e-1){if(c.GameManager.gameState==c.EGAMESTATE.WIN)return;c.GameManager.gameState=c.EGAMESTATE.WIN,this.top.getComponent(cc.Sprite).spriteFrame=this.castleTopIconArr[0],i.GameDataCenter.totleCastle++}else i.GameDataCenter.curCastleIndex!=e-1&&s.UIManager.open("Game/SkillPanel")},t.EEventName={CHECK_ROOM_LIGHT:"CHECK_ROOM_LIGHT",ROOM_LIGHT_HIDE:"ROOM_LIGHT_HIDE",CASTLE_UP:"CASTLE_UP"},a([y({type:cc.Prefab,tooltip:"\u623f\u95f4\u9884\u7f6e\u4f53"})],t.prototype,"roomPre",void 0),a([y({type:cc.Node,tooltip:"\u623f\u95f4\u7684\u7236\u8282\u70b9"})],t.prototype,"roomManager",void 0),a([y({type:cc.Node,tooltip:"\u57ce\u5821\u9876\u90e8"})],t.prototype,"top",void 0),a([y({type:cc.SpriteFrame,tooltip:"\u57ce\u5821\u9876\u90e8\u56fe\u7247"})],t.prototype,"castleTopIconArr",void 0),a([d],t)}(cc.Component);o.Castle=h,cc._RF.pop()},{"../../Script/GameDataCenter":void 0,"../../Script/GameManager":void 0,"../../Script/UIManager":void 0,"../Script/LevelConfig":"LevelConfig"}],EnemySpineManager:[function(e,t,o){"use strict";cc._RF.push(t,"27a0fVq+ipLnpjvW9GK3Te2","EnemySpineManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.EnemySpineManager=void 0;var i=e("../../../Script/GameManager"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t.normalMat=null,t.whiteMat=null,t}return r(t,e),t.prototype.onEnable=function(){cc.systemEvent.on(i.GameManager.EEventName.GAME_OVER,this.win,this)},t.prototype.onDisable=function(){cc.systemEvent.off(i.GameManager.EEventName.GAME_OVER,this.win,this)},t.prototype.die=function(){Math.random()>=.5?this.spine.setAnimation(0,"died1",!1):this.spine.setAnimation(0,"died2",!1)},t.prototype.attack=function(){this.spine.setMaterial(0,this.normalMat),this.spine.setAnimation(0,"gj",!0),this.scheduleOnce(function(){cc.systemEvent.emit("PLAY_SOUND","attack")},.2)},t.prototype.win=function(){this.spine.setAnimation(0,"success",!0)},t.prototype.taunt=function(){this.spine.setAnimation(0,"chaofeng",!1),this.spine.addAnimation(0,"daiji",!0)},t.prototype.shaderWhite=function(e,t){var o=t;this.spine.setMaterial(0,this.whiteMat),e.getMaterial(0).setProperty("time",o,0),this.scheduleOnce(function(){e.getMaterial(0).setProperty("time",0,0)},.06)},a([l({type:sp.Skeleton,tooltip:"spine\u7ec4\u4ef6"})],t.prototype,"spine",void 0),a([l({type:cc.Material,tooltip:"\u9ed8\u8ba4\u6750\u8d28"})],t.prototype,"normalMat",void 0),a([l({type:cc.Material,tooltip:"\u95ea\u767d\u6750\u8d28"})],t.prototype,"whiteMat",void 0),a([s],t)}(cc.Component);o.EnemySpineManager=p,cc._RF.pop()},{"../../../Script/GameManager":void 0}],Enemy:[function(e,t,o){"use strict";cc._RF.push(t,"20c23BNiUlLTrHhgeoNrTPM","Enemy");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.Enemy=void 0;var i=e("../../../Script/GameDataCenter"),c=e("../../../Script/GameManager"),s=e("./EnemySpineManager"),l=cc._decorator,p=l.ccclass,d=l.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.EnemySpineManager=null,t.showHPPrefab=null,t._totleData=0,t.data=0,t.castleIndex=null,t.roomIndex=null,t.posIndex=0,t._isFight=!1,t._reduceData=0,t.enemyType=null,t}return r(t,e),t.prototype.onEnable=function(){this.EnemySpineManager.taunt(),cc.systemEvent.on(c.GameManager.EEventName.ENEMY_NORMAL_ATTACK,this.onAttackEvent,this),cc.systemEvent.on(c.GameManager.EEventName.HERO_NORMAL_ATTACK,this.onHurtEvent,this),cc.systemEvent.on(c.GameManager.EEventName.HERO_SKILL_ATTACK,this.onSkillHurtEvent,this),cc.systemEvent.on(c.GameManager.EEventName.CLEAR_CASTLE_ENENY,this.onPlayTantEvent,this)},t.prototype.onDisable=function(){cc.systemEvent.off(c.GameManager.EEventName.ENEMY_NORMAL_ATTACK,this.onAttackEvent,this),cc.systemEvent.off(c.GameManager.EEventName.HERO_NORMAL_ATTACK,this.onHurtEvent,this),cc.systemEvent.off(c.GameManager.EEventName.HERO_SKILL_ATTACK,this.onSkillHurtEvent,this),cc.systemEvent.off(c.GameManager.EEventName.CLEAR_CASTLE_ENENY,this.onPlayTantEvent,this)},t.prototype.onCollisionEnter=function(e){1==e.tag&&(this._isFight=!0)},t.prototype.setData=function(e,t,o,n,r){this.data=e,this.castleIndex=t,this.roomIndex=o,this.posIndex=n,this._totleData=e,this.enemyType=r,this.showData()},t.prototype.onHurtEvent=function(e){var t=this;if(this._isFight&&!(this.data<=0)){var o=this.data-e;o<=0?(o=this.data,this._reduceData=this.data,this.data=0,this.scheduleOnce(function(){t.EnemySpineManager.die()},.3),cc.systemEvent.emit(c.GameManager.EEventName.ENEMY_DIE),this.dieLogic()):(o=e,this.data-=e,this._reduceData=e,this.hitBackTween()),this.showData(),i.GameDataCenter.heroAddData+=o,this.initHPRedeucAni(),cc.systemEvent.emit(c.GameManager.EEventName.HERO_ADD_DATA),this.EnemySpineManager.shaderWhite(this.EnemySpineManager.spine,.7),cc.systemEvent.emit("PLAY_SOUND","hit")}},t.prototype.onSkillHurtEvent=function(e,t,o,n){var r=this;if(o==this.castleIndex&&n==this.roomIndex&&!(this.data<=0)){var a=this.data-e;a<=0?(a=this.data,this._reduceData=this.data,this.data=0,this.scheduleOnce(function(){r.EnemySpineManager.die()},.3),this.dieLogic(),cc.systemEvent.emit(c.GameManager.EEventName.ENEMY_DIE)):(a=e,this.data-=e,this._reduceData=e),this.hitBackTween(),this.showData(),i.GameDataCenter.heroAddData+=a,this.initHPRedeucAni(),this.EnemySpineManager.shaderWhite(this.EnemySpineManager.spine,.7),cc.systemEvent.emit("PLAY_SOUND","hit")}},t.prototype.onAttackEvent=function(){this._isFight&&this.EnemySpineManager.attack()},t.prototype.onPlayTantEvent=function(){this.data<=0||this.EnemySpineManager.taunt()},t.prototype.initHPRedeucAni=function(){var e=cc.instantiate(this.showHPPrefab);e.parent=this.node,e.setPosition(-6,140),e.scale=.95,e.getComponent("ShowDataAdd").setData(-this._reduceData),cc.tween(e).to(.6,{position:cc.v3(-6,180)}).call(function(){e.destroy()}).start()},t.prototype.dieLogic=function(){var e=this;3==this.enemyType||7==this.enemyType||8==this.enemyType?cc.systemEvent.emit("PLAY_SOUND","monsterDie"):5==this.enemyType?cc.systemEvent.emit("PLAY_SOUND","dogDie"):cc.systemEvent.emit("PLAY_SOUND","enemyDie"),i.GameDataCenter.killEnemy++,this.node.parent=this.node.parent.parent,this.node.removeComponent(cc.BoxCollider),this.node.getChildByName("numDisplay").active=!1,cc.tween(this.node).delay(.7).to(.5,{opacity:0}).call(function(){cc.systemEvent.emit("SET_HERO_STATE",1,.3),e.scheduleOnce(function(){e.node.destroy()},1)}).start();var t=this.node.parent.convertToWorldSpaceAR(this.node.getPosition());cc.systemEvent.emit(c.GameManager.EEventName.ENEMY_LOAD_COIN,t)},t.prototype.hitBackTween=function(){cc.tween(this.node).by(.05,{x:-10}).by(.05,{x:10}).by(.02,{x:-7}).by(.02,{x:7}).start()},t.prototype.showData=function(){if(this.data>=1e3){var e=this.data/1e3;this.node.getChildByName("numDisplay").getComponent(cc.Label).string=e+"K"}else this.node.getChildByName("numDisplay").getComponent(cc.Label).string=""+this.data},a([d({type:s.EnemySpineManager,tooltip:"\u654c\u4eba\u52a8\u4f5c\u7ba1\u7406"})],t.prototype,"EnemySpineManager",void 0),a([d({type:cc.Prefab,tooltip:"\u6263\u8840\u7684\u9884\u5236\u4f53"})],t.prototype,"showHPPrefab",void 0),a([p],t)}(cc.Component);o.Enemy=y,cc._RF.pop()},{"../../../Script/GameDataCenter":void 0,"../../../Script/GameManager":void 0,"./EnemySpineManager":"EnemySpineManager"}],Equ_Animation:[function(e,t,o){"use strict";cc._RF.push(t,"1cbc8mM8IZFzK+6cLnEiMWj","Equ_Animation");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.Equ_Animation=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.light=null,t.actNode=null,t}return r(t,e),t.prototype.start=function(){cc.tween(this.light).repeatForever(cc.tween().to(.5,{opacity:0}).to(.5,{opacity:255})).start(),cc.tween(this.actNode).repeatForever(cc.tween().by(.8,{y:15}).by(.8,{y:-15})).start()},a([s({type:cc.Node,tooltip:"\u5149\u56fe\u7247"})],t.prototype,"light",void 0),a([s({type:cc.Node,tooltip:"\u5149\u56fe\u7247"})],t.prototype,"actNode",void 0),a([c],t)}(cc.Component);o.Equ_Animation=l,cc._RF.pop()},{}],Equipment:[function(e,t,o){"use strict";cc._RF.push(t,"c8730N5RoJEa5n+A5Y3whfb","Equipment");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.Equipment=void 0;var i=e("../../../Script/GameDataCenter"),c=e("../../../Script/GameManager"),s=e("../../../Script/Utils"),l=e("../../Script/MapMess"),p=e("../../Script/PlayerState"),d=cc._decorator,y=d.ccclass,h=d.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.numDisplay=null,t.data=0,t._tag=0,t.posIndex=2,t}return r(t,e),t.prototype.onEnable=function(){cc.systemEvent.on("STATUE_ADD_DATA",this.statueHideTween,this)},t.prototype.onDisable=function(){cc.systemEvent.off("STATUE_ADD_DATA",this.statueHideTween,this)},t.prototype.onCollisionEnter=function(e){if(1==e.tag){var t=this.node.getComponent(cc.BoxCollider).tag;switch(this.scheduleOnce(function(){cc.systemEvent.emit(c.GameManager.EEventName.ENEMY_DIE)},.5),t){case 0:case 5:this.hideTween();break;case 1:this.woodBroken();break;case 4:this.openBox()}}},t.prototype.setData=function(e,t){var o=this;this.data=e,this.posIndex=t,this.scheduleOnce(function(){if(o._tag=o.node.getComponent(cc.BoxCollider).tag,0==o._tag||1==o._tag||5==o._tag)if(Math.abs(o.data)>=1e3){var e=o.data/1e3;o.numDisplay.string=e+"K"}else o.numDisplay.string=""+o.data},0)},t.prototype.hideTween=function(){var e=this;i.GameDataCenter.roomEnemyCount--,cc.tween(this.node).to(.5,{opacity:0}).call(function(){p.PlayerState.heroState=1,e.node.destroy()}).start()},t.prototype.woodBroken=function(){var e=this;i.GameDataCenter.roomEnemyCount--,this.scheduleOnce(function(){e.node.removeComponent(cc.BoxCollider),e.node.getChildByName("wood").active=!1,e.node.getChildByName("dragon").getComponent(dragonBones.ArmatureDisplay).playAnimation("mzposui",1),cc.systemEvent.emit("CHECK_ROOM_LIGHT",i.GameDataCenter.curCastleIndex,i.GameDataCenter.colliderRoomIndex),cc.systemEvent.emit("SET_HERO_STATE",1,.5),e.scheduleOnce(function(){e.node.destroy()},2)},.4)},t.prototype.statueHideTween=function(){var e=this;2==this._tag&&cc.tween(this.node).by(.02,{x:-2}).by(.02,{x:2}).by(.02,{x:-2}).by(.02,{x:2}).by(.1,{x:-10}).by(.1,{x:10}).by(.02,{x:-5}).by(.02,{x:5}).by(.02,{x:-4}).by(.02,{x:4}).by(.01,{x:0}).delay(.2).to(.2,{opacity:0}).call(function(){e.scheduleOnce(function(){cc.systemEvent.emit(c.GameManager.EEventName.ENEMY_DIE)},.5),e.node.destroy()}).start()},t.prototype.openBox=function(){var e=this;this.scheduleOnce(function(){cc.systemEvent.emit(c.GameManager.EEventName.ENEMY_DIE);var t=e.node.parent.convertToWorldSpaceAR(e.node.getPosition());cc.systemEvent.emit(c.GameManager.EEventName.ENEMY_LOAD_COIN,t)},.5),i.GameDataCenter.getFinalProp=!0,p.PlayerState.heroState=0,i.GameDataCenter.roomEnemyCount--,this.node.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"daiji1",!1),this.node.getChildByName("spine").getComponent(sp.Skeleton).addAnimation(0,"daiji2",!0),i.GameDataCenter.extraGetCoin=s.Utils.randomNumber(500,600),cc.tween(this.node).delay(1).to(.3,{opacity:0}).call(function(){cc.systemEvent.emit("CHECK_ROOM_LIGHT",i.GameDataCenter.curCastleIndex,i.GameDataCenter.colliderRoomIndex),i.GameDataCenter.curCastleIndex==l.MapMess.castleLength-1&&cc.systemEvent.emit("PASS_LEVEL")}).start()},a([h({type:cc.Label,tooltip:"\u5c5e\u6027\u663e\u793a"})],t.prototype,"numDisplay",void 0),a([y],t)}(cc.Component);o.Equipment=u,cc._RF.pop()},{"../../../Script/GameDataCenter":void 0,"../../../Script/GameManager":void 0,"../../../Script/Utils":void 0,"../../Script/MapMess":"MapMess","../../Script/PlayerState":"PlayerState"}],FightLayer:[function(e,t,o){"use strict";cc._RF.push(t,"65590pjHDNAQq0ihC4KCNLj","FightLayer");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.FightLayer=void 0;var i=e("../../Script/GameDataCenter"),c=e("../../Script/GameManager"),s=e("./PlayerState"),l=cc._decorator,p=l.ccclass,d=l.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skillPre=null,t.skillManager=null,t.coinManager=null,t.coinPre=null,t._targetPos=cc.v2(0,0),t}return r(t,e),t.prototype.onEnable=function(){cc.systemEvent.on(c.GameManager.EEventName.CLEAR_CASTLE_ENENY,this.onMoveEvent,this),cc.systemEvent.on(c.GameManager.EEventName.ENEMY_LOAD_COIN,this.onLoadCoinEvent,this)},t.prototype.onDisable=function(){cc.systemEvent.off(c.GameManager.EEventName.CLEAR_CASTLE_ENENY,this.onMoveEvent,this),cc.systemEvent.off(c.GameManager.EEventName.ENEMY_LOAD_COIN,this.onLoadCoinEvent,this)},t.prototype.start=function(){i.GameDataCenter.fightLayerOffsetX=0},t.prototype.onMoveEvent=function(){var e=this;i.GameDataCenter.curCastleIndex=0,i.GameDataCenter.lastCastleIndex=0,i.GameDataCenter.colliderRoomIndex=0,i.GameDataCenter.standRoomIndex=0,i.GameDataCenter.lastRoomTag=null,s.PlayerState.heroState=0,i.GameDataCenter.isMove=!0,cc.tween(this.node).by(.5,{x:-cc.view.getVisibleSize().width/2}).call(function(){e.scheduleOnce(function(){s.PlayerState.heroState=1},.5),i.GameDataCenter.isMove=!1,s.PlayerState.moveLimit=!1,i.GameDataCenter.lastCastleIndex=i.GameDataCenter.curCastleIndex}).start(),i.GameDataCenter.fightLayerOffsetX=this.node.x-cc.view.getVisibleSize().width/2},t.prototype.onLoadCoinEvent=function(e){var t=this;this._targetPos=this.coinManager.getPosition();var o=this.node.x;o<0&&(this._targetPos.x+=Math.abs(o));var n=this.node.convertToNodeSpaceAR(e);this.scheduleOnce(function(){t.schedule(function(){var e=cc.instantiate(t.coinPre);e.setPosition(n),cc.tween(e).delay(.15).call(function(){e.parent=t.node,cc.systemEvent.emit("PLAY_SOUND","getCoin")}).to(.6,{position:cc.v3(t._targetPos)}).call(function(){e.destroy()}).start()},.035,3)},.2)},a([d({type:cc.Prefab,tooltip:"\u6280\u80fd\u9884\u5236\u4f53"})],t.prototype,"skillPre",void 0),a([d({type:cc.Node,tooltip:"\u6280\u80fd\u7ba1\u7406\u8282\u70b9"})],t.prototype,"skillManager",void 0),a([d({type:cc.Node,tooltip:"\u91d1\u5e01\u663e\u793a\u8282\u70b9"})],t.prototype,"coinManager",void 0),a([d({type:cc.Prefab,tooltip:"\u91d1\u5e01\u9884\u5236\u4f53"})],t.prototype,"coinPre",void 0),a([p],t)}(cc.Component);o.FightLayer=y,cc._RF.pop()},{"../../Script/GameDataCenter":void 0,"../../Script/GameManager":void 0,"./PlayerState":"PlayerState"}],GamePanelSkillPre:[function(e,t,o){"use strict";cc._RF.push(t,"680adpoI2dAMoP3+q+wYO/l","GamePanelSkillPre");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.GamePanelSkillPre=void 0;var i=e("../../../Script/GameDataCenter"),c=e("../../../Script/Utils"),s=cc._decorator,l=s.ccclass,p=s.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.describeNode=null,t.skillIcon=null,t.skillIconArr=[],t._isTouch=!1,t.skillIndex=-1,t._strArr=["<color=#000000>\u9020\u6210</c><color=blue>10%</color><color=#000000>\u51b0\u5c5e\u6027<br/>\u5355\u4f53\u4f24\u5bb3</c>","<color=#000000>\u9020\u6210</c><color=blue>10%</color><color=#000000>\u706b\u5c5e\u6027<br/>\u5355\u4f53\u4f24\u5bb3</c>","<color=#000000>\u9020\u6210</c><color=blue>10%</color><color=#000000>\u96f7\u5c5e\u6027<br/>\u5355\u4f53\u4f24\u5bb3</c>","<color=#000000>\u9020\u6210</c><color=blue>10%</color><color=#000000>\u571f\u5c5e\u6027<br/>\u5355\u4f53\u4f24\u5bb3</c>","<color=#000000>\u9020\u6210</c><color=blue>5%</color><color=#000000>\u51b0\u5c5e\u6027<br/>\u7fa4\u4f53\u4f24\u5bb3</c>","<color=#000000>\u9020\u6210</c><color=blue>5%</color><color=#000000>\u706b\u5c5e\u6027<br/>\u7fa4\u4f53\u4f24\u5bb3</c>","<color=#000000>\u9020\u6210</c><color=blue>5%</color><color=#000000>\u96f7\u5c5e\u6027<br/>\u7fa4\u4f53\u4f24\u5bb3</c>","<color=#000000>\u9020\u6210</c><color=blue>5%</color><color=#000000>\u571f\u5c5e\u6027<br/>\u7fa4\u4f53\u4f24\u5bb3</c>"],t._strArr_2=["<color=#000000>\u9020\u6210</c><color=blue>20%</color><color=#000000>\u51b0\u5c5e\u6027<br/>\u5355\u4f53\u4f24\u5bb3</c>","<color=#000000>\u9020\u6210</c><color=blue>20%</color><color=#000000>\u706b\u5c5e\u6027<br/>\u5355\u4f53\u4f24\u5bb3</c>","<color=#000000>\u9020\u6210</c><color=blue>20%</color><color=#000000>\u96f7\u5c5e\u6027<br/>\u5355\u4f53\u4f24\u5bb3</c>","<color=#000000>\u9020\u6210</c><color=blue>20%</color><color=#000000>\u571f\u5c5e\u6027<br/>\u5355\u4f53\u4f24\u5bb3</c>","<color=#000000>\u9020\u6210</c><color=blue>10%</color><color=#000000>\u51b0\u5c5e\u6027<br/>\u7fa4\u4f53\u4f24\u5bb3</c>","<color=#000000>\u9020\u6210</c><color=blue>10%</color><color=#000000>\u706b\u5c5e\u6027<br/>\u7fa4\u4f53\u4f24\u5bb3</c>","<color=#000000>\u9020\u6210</c><color=blue>10%</color><color=#000000>\u96f7\u5c5e\u6027<br/>\u7fa4\u4f53\u4f24\u5bb3</c>","<color=#000000>\u9020\u6210</c><color=blue>10%</color><color=#000000>\u571f\u5c5e\u6027<br/>\u7fa4\u4f53\u4f24\u5bb3</c>"],t}return r(t,e),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},t.prototype.onTouchStart=function(){var e=this;if(!this._isTouch){if(this._isTouch=!0,c.Utils.checkInArray(this.skillIndex,i.GameDataCenter.doubleDamageSkill)){var t=this._strArr_2[this.skillIndex];this.describeNode.getChildByName("describeLabel").getComponent(cc.RichText).string=t}this.describeNode.opacity=255,cc.systemEvent.emit("PLAY_SOUND","click"),this.scheduleOnce(function(){e._isTouch=!1,e.describeNode.opacity=0},2)}},t.prototype.setData=function(e){this.skillIndex=e,this.skillIcon.spriteFrame=this.skillIconArr[this.skillIndex];var t=this._strArr[this.skillIndex];this.describeNode.getChildByName("describeLabel").getComponent(cc.RichText).string=t},a([p({type:cc.Node,tooltip:"\u6280\u80fd\u8868\u8ff0\u8282\u70b9"})],t.prototype,"describeNode",void 0),a([p({type:cc.Sprite,tooltip:"\u6280\u80fd\u56fe\u7247\u663e\u793a\u7cbe\u7075"})],t.prototype,"skillIcon",void 0),a([p({type:[cc.SpriteFrame],tooltip:"\u6280\u80fd\u56fe\u7247\u6570\u7ec4"})],t.prototype,"skillIconArr",void 0),a([l],t)}(cc.Component);o.GamePanelSkillPre=d,cc._RF.pop()},{"../../../Script/GameDataCenter":void 0,"../../../Script/Utils":void 0}],GamePanel:[function(e,t,o){"use strict";cc._RF.push(t,"0620cjcR4VC5oG2OX8mwDIC","GamePanel");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.GamePanel=void 0;var i=e("../Script/AudioManager"),c=e("../Script/GameDataCenter"),s=e("../Script/GameManager"),l=e("../Script/UIManager"),p=e("../Script/Utils"),d=e("./Script/LevelConfig"),y=e("./Script/PlayerState"),h=cc._decorator,u=h.ccclass,f=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skillPre=null,t.skillManager=null,t.enemyDisplay=null,t.coinDisplay=null,t.levelDisplay=null,t.hero=null,t.mask=null,t.propPanel=null,t._camere=null,t}return r(t,e),t.prototype.onEnable=function(){cc.systemEvent.on(s.GameManager.EEventName.GAMEPANEL_LOAD_SKILL,this.loadSkillEvent,this),cc.systemEvent.on(s.GameManager.EEventName.GAME_WIN,this.onGameWinEvent,this),cc.systemEvent.on(s.GameManager.EEventName.GAME_OVER,this.onGameOverEvent,this),cc.systemEvent.on(c.GameDataCenter.EEventName.UPDATE_ENEMY_COUNT,this.onUpdateEnemyCountEvent,this),cc.systemEvent.on(c.GameDataCenter.EEventName.UPDATE_DATA_COIN,this.onUpdateCoinEvent,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),s.GameManager.gameState=s.EGAMESTATE.START,c.GameDataCenter.chooseLevel=c.GameDataCenter.gameLevel,c.GameDataCenter.chooseLevel>d.LevelConfig.map.length&&(c.GameDataCenter.chooseLevel=p.Utils.randomNumber(1,d.LevelConfig.map.length)),this.coinDisplay.string=""+c.GameDataCenter.coin,this.levelDisplay.string=""+c.GameDataCenter.gameLevel,this.openPropPanel(),this._camere=this.node.parent.getChildByName("Main Camera")},t.prototype.onDisable=function(){cc.systemEvent.off(s.GameManager.EEventName.GAMEPANEL_LOAD_SKILL,this.loadSkillEvent,this),cc.systemEvent.off(s.GameManager.EEventName.GAME_OVER,this.onGameOverEvent,this),cc.systemEvent.off(c.GameDataCenter.EEventName.UPDATE_ENEMY_COUNT,this.onUpdateEnemyCountEvent,this),cc.systemEvent.off(c.GameDataCenter.EEventName.UPDATE_DATA_COIN,this.onUpdateCoinEvent,this),this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),c.GameDataCenter.skillPanelCount=0,c.GameDataCenter.curCastleIndex=0,c.GameDataCenter.lastCastleIndex=0,c.GameDataCenter.colliderRoomIndex=0,c.GameDataCenter.standRoomIndex=0,c.GameDataCenter.lastRoomTag=null,y.PlayerState.moveLimit=!1,y.PlayerState.playerCanMove=!1,this._camere.getComponent(cc.Camera).zoomRatio=1,this.mask.active=!1,this._camere.setPosition(0,0),this.mask.setPosition(0,0)},t.prototype.start=function(){},t.prototype.onTouchStart=function(){1!=c.GameDataCenter.gameLevel&&2!=c.GameDataCenter.gameLevel||(cc.systemEvent.emit("GUIDE_HIDE"),cc.systemEvent.emit("GUIDE_FINGER_HIDE"))},t.prototype.onRefreshClicked=function(){c.GameDataCenter.isMove||(cc.systemEvent.emit(y.PlayerState.EEventName.SET_MOVE_STATE),cc.systemEvent.emit("PLAY_SOUND","btnClick"),l.UIManager.close("GamePanel",!0),l.UIManager.open("GamePanel"))},t.prototype.loadSkillEvent=function(e){0==this.skillManager.childrenCount&&cc.tween(this.skillManager.parent).by(.7,{x:165}).start();var t=cc.instantiate(this.skillPre);t.parent=this.skillManager,t.getComponent("GamePanelSkillPre").setData(e)},t.prototype.onGameWinEvent=function(){this.onCameraFoucsEvent(),i.AudioManager.instance.stopBgm(),cc.systemEvent.emit("PLAY_SOUND","win"),c.GameDataCenter.gameLevel++,this.scheduleOnce(function(){l.UIManager.close("Game/GamePanel",!0),l.UIManager.open("Result/ResultPanel"),cc.systemEvent.emit("PLAY_SOUND","bgm",.5,!0)},4.5)},t.prototype.onGameOverEvent=function(){this.onCameraFoucsEvent(),i.AudioManager.instance.stopBgm(),cc.systemEvent.emit("PLAY_SOUND","lose"),this.scheduleOnce(function(){l.UIManager.close("Game/GamePanel",!0),l.UIManager.open("Result/ResultPanel"),cc.systemEvent.emit("PLAY_SOUND","bgm",.5,!0)},4.5)},t.prototype.onUpdateEnemyCountEvent=function(){this.enemyDisplay.string=""+(c.GameDataCenter.totleEnemy-c.GameDataCenter.killEnemy)},t.prototype.onUpdateCoinEvent=function(){this.coinDisplay.string=""+c.GameDataCenter.coin,console.log("\u6e38\u620f\u9875\u91d1\u5e01\u5237\u65b0",c.GameDataCenter.coin)},t.prototype.onCameraFoucsEvent=function(){var e=this,t=this.hero.x+c.GameDataCenter.fightLayerOffsetX,o=cc.v3(t,this.hero.y,0);this.maskTween(o),cc.tween(this._camere).delay(1).to(.7,{position:o}).delay(.3).call(function(){e.schedule(function(){e._camere.getComponent(cc.Camera).zoomRatio+=.01},.01,49)}).start()},t.prototype.maskTween=function(e){var t=this;cc.tween(this.mask).delay(.5).call(function(){t.mask.active=!0}).to(1,{position:e,width:300,height:300}).call(function(){t.mask.active=!0}).start()},t.prototype.openPropPanel=function(){var e=!1;if(3==c.GameDataCenter.gameLevel?e=!0:c.GameDataCenter.gameLevel>3&&(e=Math.random()>.75),e){var t=cc.instantiate(this.propPanel);t.parent=this.node,t.setPosition(0,0)}},a([f({type:cc.Prefab,tooltip:"\u6280\u80fd\u9884\u5236\u4f53"})],t.prototype,"skillPre",void 0),a([f({type:cc.Node,tooltip:"\u6280\u80fd\u7ba1\u7406\u8282\u70b9"})],t.prototype,"skillManager",void 0),a([f({type:cc.Label,tooltip:"\u654c\u4eba\u6570\u91cf\u663e\u793a"})],t.prototype,"enemyDisplay",void 0),a([f({type:cc.Label,tooltip:"\u91d1\u5e01\u663e\u793a"})],t.prototype,"coinDisplay",void 0),a([f({type:cc.Label,tooltip:"\u5173\u5361\u663e\u793a"})],t.prototype,"levelDisplay",void 0),a([f({type:cc.Node,tooltip:"\u82f1\u96c4"})],t.prototype,"hero",void 0),a([f({type:cc.Node,tooltip:"\u805a\u7126\u906e\u7f69"})],t.prototype,"mask",void 0),a([f({type:cc.Prefab,tooltip:"\u5c5e\u6027\u52a0\u5f3a\u9875"})],t.prototype,"propPanel",void 0),a([u],t)}(cc.Component);o.GamePanel=m,cc._RF.pop()},{"../Script/AudioManager":void 0,"../Script/GameDataCenter":void 0,"../Script/GameManager":void 0,"../Script/UIManager":void 0,"../Script/Utils":void 0,"./Script/LevelConfig":"LevelConfig","./Script/PlayerState":"PlayerState"}],GetPropPanel:[function(e,t,o){"use strict";cc._RF.push(t,"4ecdaijTEVIeY1yVQgAKF74","GetPropPanel");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.GetPropPanel=void 0;var i=e("../Script/GameDataCenter"),c=e("../Script/GameManager"),s=e("../Script/Utils"),l=cc._decorator,p=l.ccclass,d=l.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.payCoinDisplay=null,t.dataDisplay=null,t.coinManager=null,t.videoIcon=null,t._randomData=0,t._payCoin=0,t}return r(t,e),t.prototype.onEnable=function(){this._randomData=s.Utils.randomNumber(2,7),this._payCoin=s.Utils.randomNumber(500,800),this.dataDisplay.string=""+this._randomData,this.payCoinDisplay.string="-"+this._payCoin,i.GameDataCenter.coin<this._payCoin&&(this.coinManager.active=!1,this.videoIcon.active=!0)},t.prototype.onClicked=function(){i.GameDataCenter.coin>=this._payCoin?(this.addDataLogic(),i.GameDataCenter.coin-=this._payCoin,this.node.destroy()):(this.addDataLogic(),this.node.destroy())},t.prototype.addDataLogic=function(){i.GameDataCenter.heroAddData=this._randomData,cc.systemEvent.emit(c.GameManager.EEventName.HERO_ADD_DATA)},t.prototype.onCloseBtnClicked=function(){this.node.destroy()},a([d({type:cc.Label,tooltip:"\u9700\u8981\u82b1\u8d39\u7684\u91d1\u5e01\u663e\u793a"})],t.prototype,"payCoinDisplay",void 0),a([d({type:cc.Label,tooltip:"\u83b7\u5f97\u5c5e\u6027\u663e\u793a"})],t.prototype,"dataDisplay",void 0),a([d({type:cc.Node,tooltip:"\u6d88\u8d39\u91d1\u5e01\u663e\u793a\u7ba1\u7406\u8282\u70b9"})],t.prototype,"coinManager",void 0),a([d({type:cc.Node,tooltip:"video\u56fe\u6807"})],t.prototype,"videoIcon",void 0),a([p],t)}(cc.Component);o.GetPropPanel=y,cc._RF.pop()},{"../Script/GameDataCenter":void 0,"../Script/GameManager":void 0,"../Script/Utils":void 0}],GuideFinger:[function(e,t,o){"use strict";cc._RF.push(t,"beb00HQDbZKTKRD+0ozQxFw","GuideFinger");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.GuideFinger=void 0;var i=cc._decorator,c=i.ccclass,s=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),a([c],t)}(cc.Component));o.GuideFinger=s,cc._RF.pop()},{}],GuidePanel:[function(e,t,o){"use strict";cc._RF.push(t,"7a08329ALdNgLM2bAZwV2F1","GuidePanel");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.GuidePanel=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enemy_1=null,t.enemy_2=null,t.hero_1=null,t.finger=null,t.moveNode=null,t}return r(t,e),t.prototype.onEnable=function(){this.guideAni(),cc.systemEvent.on("GUIDE_HIDE",this.onHideEvent,this)},t.prototype.onDisable=function(){cc.systemEvent.off("GUIDE_HIDE",this.onHideEvent,this)},t.prototype.onClicked=function(){this.node.destroy()},t.prototype.onHideEvent=function(){this.unscheduleAllCallbacks(),this.node.destroy()},t.prototype.guideAni=function(){var e=this;cc.tween(this.moveNode).repeatForever(cc.tween().delay(.5).call(function(){e.finger.scale=1.2,cc.tween(e.finger).to(.3,{scale:.7,opacity:255}).start()}).delay(.5).by(1,{x:-450}).call(function(){cc.tween(e.finger).to(.3,{scale:1.2,opacity:0}).start(),e.hero_1.setAnimation(0,"gj",!1),e.hero_1.addAnimation(0,"daiji",!1),e.scheduleOnce(function(){e.enemy_1.setAnimation(0,"died1",!1)},.3)}).delay(.8).call(function(){cc.tween(e.finger).to(.3,{scale:.7,opacity:255}).start()}).delay(.8).by(1,{x:-450}).call(function(){cc.tween(e.finger).to(.3,{scale:1.2,opacity:0}).start(),e.enemy_2.setAnimation(0,"gj",!1),e.enemy_2.addAnimation(0,"daiji",!1),e.scheduleOnce(function(){e.hero_1.setAnimation(0,"died1",!1)},.3)}).delay(1.5).call(function(){e.enemy_1.setAnimation(0,"daiji",!1),e.hero_1.setAnimation(0,"daiji",!1),e.moveNode.x=0})).start()},a([s({type:sp.Skeleton,tooltip:"\u654c\u4eba1"})],t.prototype,"enemy_1",void 0),a([s({type:sp.Skeleton,tooltip:"\u654c\u4eba2"})],t.prototype,"enemy_2",void 0),a([s({type:sp.Skeleton,tooltip:"\u82f1\u96c41"})],t.prototype,"hero_1",void 0),a([s({type:cc.Node,tooltip:"\u624b\u6307"})],t.prototype,"finger",void 0),a([s({type:cc.Node,tooltip:"\u79fb\u52a8\u8282\u70b9"})],t.prototype,"moveNode",void 0),a([c],t)}(cc.Component);o.GuidePanel=l,cc._RF.pop()},{}],Guide:[function(e,t,o){"use strict";cc._RF.push(t,"28d3ciLwm9AC711e8rG4XXU","Guide");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.Guide=void 0;var i=e("../../Script/GameDataCenter"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guidePanel=null,t.fingerPre=null,t._isShow=!1,t}return r(t,e),t.prototype.onEnable=function(){cc.systemEvent.on("GUIDE_FINGER_HIDE",this.onHideFingerEvent,this),cc.systemEvent.on("GUIDE_FINGER_SHOW",this.onShowFingerEvent,this)},t.prototype.onDisable=function(){cc.systemEvent.off("GUIDE_FINGER_HIDE",this.onHideFingerEvent,this),cc.systemEvent.off("GUIDE_FINGER_SHOW",this.onShowFingerEvent,this)},t.prototype.start=function(){var e=cc.v2(-180,-450);if(cc.view.getVisibleSize().height/cc.view.getVisibleSize().width>=2&&(e.y-=150),1==i.GameDataCenter.gameLevel||2==i.GameDataCenter.gameLevel){var t=cc.instantiate(this.fingerPre);t.parent=this.node,t.setPosition(e),cc.tween(t).repeatForever(cc.tween().by(1,{x:360}).delay(.3).to(.01,{position:e})).start()}if(1==i.GameDataCenter.gameLevel||2==i.GameDataCenter.gameLevel){var o=cc.instantiate(this.guidePanel);o.parent=this.node,o.setPosition(0,0)}},t.prototype.onHideFingerEvent=function(){var e=this.node.getChildByName("guideFinger");null!=e&&e.destroy()},t.prototype.onShowFingerEvent=function(){if(!this._isShow){this._isShow=!0;var e=cc.v2(170,-360);cc.view.getVisibleSize().height/cc.view.getVisibleSize().width>=2&&(e.y-=150);var t=cc.instantiate(this.fingerPre);t.parent=this.node,t.setPosition(e),cc.tween(t).repeatForever(cc.tween().by(.7,{y:207}).delay(.3).to(.01,{position:e})).start()}},t.EEventName={GUIDE_HIDE:"GUIDE_HIDE",GUIDE_FINGER_SHOW:"GUIDE_FINGER_SHOW",GUIDE_FINGER_HIDE:"GUIDE_FINGER_HIDE"},a([l({type:cc.Prefab,tooltip:"\u5f15\u5bfc\u9762\u677f"})],t.prototype,"guidePanel",void 0),a([l({type:cc.Prefab,tooltip:"\u5f15\u5bfc\u9762\u677f"})],t.prototype,"fingerPre",void 0),a([s],t)}(cc.Component);o.Guide=p,cc._RF.pop()},{"../../Script/GameDataCenter":void 0}],HeroData:[function(e,t,o){"use strict";cc._RF.push(t,"8a4f70mMGZBSLkvqr0Vez64","HeroData");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.HeroData=void 0;var i=e("../../Script/GameDataCenter"),c=e("../../Script/GameManager"),s=e("./LevelConfig"),l=cc._decorator,p=l.ccclass,d=l.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dataDisplay=null,t.dataUpDragon=null,t.getDataDragon=null,t.showDataAddPre=null,t.data=0,t._addData=0,t._isScale=!1,t}var o;return r(t,e),o=t,t.prototype.onEnable=function(){cc.systemEvent.on(c.GameManager.EEventName.HERO_ADD_DATA,this.onAddDataEvent,this),cc.systemEvent.on("STATUE_ADD_DATA",this.onStatueAddDataEvent,this);var e=i.GameDataCenter.chooseLevel;this.data=s.LevelConfig.map[e-1].heroData,this.showData()},t.prototype.onDisable=function(){cc.systemEvent.off(c.GameManager.EEventName.HERO_ADD_DATA,this.onAddDataEvent,this),cc.systemEvent.off("STATUE_ADD_DATA",this.onStatueAddDataEvent,this)},t.prototype.onAddDataEvent=function(){this.data+=i.GameDataCenter.heroAddData,this._addData=i.GameDataCenter.heroAddData,this.dataDisplayTween(1,.6),this.scheduleOnce(function(){i.GameDataCenter.heroAddData=0},0)},t.prototype.setDataFunc=function(e){var t=this;if(0!=e){var n=0;e<0&&(n=.6),this.scheduleOnce(function(){t.data+=e,t._addData=e,t.dataDisplayTween(-1,0),t.data<=0&&cc.systemEvent.emit(o.EEventName.HERO_DIE,t.data)},n)}},t.prototype.onStatueAddDataEvent=function(e){this._addData=Math.ceil(this.data*e),this.data+=this._addData,this.dataDisplayTween(0,.6)},t.prototype.initAddDataAni=function(){var e=cc.instantiate(this.showDataAddPre);e.scale=1;var t=this.dataDisplay.node.parent.convertToWorldSpaceAR(this.dataDisplay.node.position),o=cc.find("Canvas/GamePanel"),n=o.convertToNodeSpaceAR(t);e.parent=o,e.setPosition(n),e.getComponent("ShowDataAdd").setData(this._addData,1),cc.tween(e).by(1,{position:cc.v3(0,80)}).call(function(){e.destroy()}).start()},t.prototype.dataDisplayTween=function(e,t){var o=this,n=t;cc.tween(this.dataDisplay.node).delay(n).call(function(){1==e?(o.getDataDragon.node.active=!0,o.getDataDragon.getComponent(dragonBones.ArmatureDisplay).playAnimation("shengji",1)):0==e&&(o.dataUpDragon.node.active=!0,o.dataUpDragon.getComponent(dragonBones.ArmatureDisplay).playAnimation("shuxing",1))}).to(.4,{scale:1.66}).call(function(){o.initAddDataAni(),o.showData(),1==e?o.getDataDragon.node.active=!1:0==e&&(o.dataUpDragon.node.active=!1)}).to(.4,{scale:.83}).call(function(){o._isScale=!1}).start()},t.prototype.showData=function(){if(this.data>=1e3){var e=this.data/1e3;this.dataDisplay.string=e+"K"}else this.dataDisplay.string=""+this.data},t.EEventName={HERO_DIE:"HERO_DIE"},a([d({type:cc.Label,tooltip:"\u5c5e\u6027\u663e\u793a"})],t.prototype,"dataDisplay",void 0),a([d({type:dragonBones.ArmatureDisplay,tooltip:"\u9053\u5177\u52a0\u6210\u7684\u5347\u7ea7\u52a8\u753b"})],t.prototype,"dataUpDragon",void 0),a([d({type:dragonBones.ArmatureDisplay,tooltip:"\u51fb\u6740\u654c\u4eba\u83b7\u5f97\u5c5e\u6027\u5347\u7ea7\u52a8\u753b"})],t.prototype,"getDataDragon",void 0),a([d({type:cc.Prefab,tooltip:"\u663e\u793a\u5c5e\u6027\u589e\u52a0\u7684\u9884\u5236\u4f53"})],t.prototype,"showDataAddPre",void 0),o=a([p],t)}(cc.Component);o.HeroData=y,cc._RF.pop()},{"../../Script/GameDataCenter":void 0,"../../Script/GameManager":void 0,"./LevelConfig":"LevelConfig"}],HeroFight:[function(e,t,o){"use strict";cc._RF.push(t,"0bb36QB5qJAG6VeO1FNrip6","HeroFight");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.HeroFight=void 0;var i=e("../../Script/GameDataCenter"),c=e("../../Script/GameManager"),s=e("../../Script/Utils"),l=e("./HeroData"),p=e("./HeroSkillManager"),d=e("./HeroSpineManager"),y=e("./PlayerState"),h=cc._decorator,u=h.ccclass,f=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.HeroData=null,t.HeroSpineManager=null,t.HeroSkillManager=null,t.spine=null,t.tombPre=null,t.getSkillArr=[],t._skillCount=0,t.curFightEnemy=null,t}return r(t,e),t.prototype.onEnable=function(){cc.systemEvent.on(c.GameManager.EEventName.SKILL_OVER,this.onUseSkillEvent,this),cc.systemEvent.on(c.GameManager.EEventName.GAMEPANEL_LOAD_SKILL,this.onAddSkillEvent,this),cc.systemEvent.on(l.HeroData.EEventName.HERO_DIE,this.onDieEvent,this)},t.prototype.onDisable=function(){cc.systemEvent.off(c.GameManager.EEventName.SKILL_OVER,this.onUseSkillEvent,this),cc.systemEvent.off(c.GameManager.EEventName.GAMEPANEL_LOAD_SKILL,this.onAddSkillEvent,this),cc.systemEvent.off(l.HeroData.EEventName.HERO_DIE,this.onDieEvent,this),this.getSkillArr=[],this.curFightEnemy=null,i.GameDataCenter.doubleDamageSkill=[]},t.prototype.start=function(){var e=this;this.spine.setEventListener(function(t){e.checkEvent(t)})},t.prototype.fightFunc=function(){y.PlayerState.heroState=0,this._skillCount=0,0!=this.getSkillArr.length?this.onUseSkillEvent():this.checkDataAttack()},t.prototype.onUseSkillEvent=function(){var e=this;if(y.PlayerState.heroState=0,this._skillCount>=this.getSkillArr.length||this.curFightEnemy.getComponent("Enemy").data<=0)return this._skillCount=0,void this.checkDataAttack();this.getSkillArr[this._skillCount]<=3?this.HeroSpineManager.singleSkillAttack():this.HeroSpineManager.aoeSkillAttack(),this.scheduleOnce(function(){e._skillCount++,cc.systemEvent.emit(c.GameManager.EEventName.SKILL_OVER)},1.8)},t.prototype.checkDataAttack=function(){var e=this;if(!cc.isValid(this.curFightEnemy)||null==this.curFightEnemy.getComponent("Enemy")||this.curFightEnemy.getComponent("Enemy").data<=0)return this.HeroSpineManager.idle(),void cc.systemEvent.emit("CHECK_ROOM_LIGHT",i.GameDataCenter.curCastleIndex,i.GameDataCenter.colliderRoomIndex);var t=this.curFightEnemy.getComponent("Enemy");this.HeroData.data-t.data>=0?(this.HeroSpineManager.normalAttack(),this.scheduleOnce(function(){cc.isValid(e.curFightEnemy)&&e.curFightEnemy.getComponent("EnemySpineManager").attack()},.4),this.scheduleOnce(function(){1==i.GameDataCenter.gameLevel&&cc.systemEvent.emit("GUIDE_FINGER_SHOW"),cc.systemEvent.emit(c.GameManager.EEventName.HERO_NORMAL_ATTACK,e.HeroData.data),i.GameDataCenter.roomEnemyCount--,cc.systemEvent.emit("CHECK_ROOM_LIGHT",i.GameDataCenter.curCastleIndex,i.GameDataCenter.colliderRoomIndex)},.5)):this.scheduleOnce(function(){if(y.PlayerState.heroState=0,cc.isValid(e.curFightEnemy)&&e.curFightEnemy.getComponent("EnemySpineManager").attack(),2==i.GameDataCenter.gameLevel){var t=e.curFightEnemy.getComponent("Enemy");t.castleIndex,t.roomIndex}e.scheduleOnce(function(){e.HeroSpineManager.normalAttack()},.2),e.scheduleOnce(function(){cc.systemEvent.emit("PLAY_SOUND","hit")},.3),e.scheduleOnce(e.onDieEvent,.5),cc.systemEvent.emit("ROOM_LIGHT_HIDE")},.3)},t.prototype.onDieEvent=function(){c.GameManager.gameState!=c.EGAMESTATE.OVER&&(this.HeroData.dataDisplay.string="0",this.HeroData.dataDisplay.node.active=!1,this.HeroSpineManager.die(),y.PlayerState.playerCanMove=!1,y.PlayerState.moveLimit=!1,this.scheduleOnce(function(){c.GameManager.gameState=c.EGAMESTATE.OVER},.7),y.PlayerState.heroState=0)},t.prototype.onAddSkillEvent=function(e){this.getSkillArr.push(e)},t.prototype.countSkillHurt=function(e){var t,o=0;return t=e<4?.1:.05,o=Math.ceil(this.HeroData.data*t),s.Utils.checkInArray(e,i.GameDataCenter.doubleDamageSkill)&&(o*=2),o},t.prototype.checkUseSkill=function(e){switch(e){case 4:this.HeroSkillManager.useAoeSkillIce();break;case 5:this.HeroSkillManager.useAoeSkillFire();break;case 6:this.HeroSkillManager.useAoeSkillThunder();break;case 7:this.HeroSkillManager.useAoeSkillSoil()}},t.prototype.checkUseSingleSkill=function(e){switch(e){case 0:this.HeroSkillManager.useSingleIce();break;case 1:this.HeroSkillManager.useSingleFire();break;case 2:this.HeroSkillManager.useSingleThunder();break;case 3:this.HeroSkillManager.useSingleSoil()}},t.prototype.checkEvent=function(e){var t=this;switch(e.animation.name){case"gj":this.scheduleOnce(function(){cc.systemEvent.emit("PLAY_SOUND","attack")},.1);break;case"gj1":this.releaseSingleSkill();break;case"gj2":this.releaseAoeSkill();break;case"died1":case"died2":this.HeroSpineManager.fallDustDragon(),this.scheduleOnce(function(){t.tombFall()},.1)}},t.prototype.releaseAoeSkill=function(){var e=this.getSkillArr[this._skillCount],t=this.countSkillHurt(e);this.checkUseSkill(e),cc.systemEvent.emit(c.GameManager.EEventName.HERO_SKILL_ATTACK,t,e,i.GameDataCenter.curCastleIndex,i.GameDataCenter.colliderRoomIndex),cc.systemEvent.emit(c.GameManager.EEventName.HERO_ADD_DATA)},t.prototype.releaseSingleSkill=function(){var e=this.getSkillArr[this._skillCount];this.checkUseSingleSkill(e);var t=this.countSkillHurt(this.getSkillArr[this._skillCount]);cc.systemEvent.emit(c.GameManager.EEventName.HERO_NORMAL_ATTACK,t,this.getSkillArr[this._skillCount])},t.prototype.tombFall=function(){var e=cc.instantiate(this.tombPre);e.parent=this.node.parent;var t=this.node.position;e.setPosition(cc.v2(t.x,t.y-30));var o=e.getChildByName("spine").getComponent(sp.Skeleton);o.setAnimation(0,"daiji1",!1),o.addAnimation(0,"daiji2",!0)},a([f({type:l.HeroData,tooltip:"\u82f1\u96c4\u5c5e\u6027"})],t.prototype,"HeroData",void 0),a([f({type:d.HeroSpineManager,tooltip:"\u52a8\u753b\u7ba1\u7406"})],t.prototype,"HeroSpineManager",void 0),a([f({type:p.HeroSkillManager,tooltip:"\u6280\u80fd\u7ba1\u7406"})],t.prototype,"HeroSkillManager",void 0),a([f({type:sp.Skeleton,tooltip:"\u82f1\u96c4\u52a8\u753b"})],t.prototype,"spine",void 0),a([f({type:cc.Prefab,tooltip:"\u6b7b\u4ea1\u5893\u7891"})],t.prototype,"tombPre",void 0),a([u],t)}(cc.Component);o.HeroFight=m,cc._RF.pop()},{"../../Script/GameDataCenter":void 0,"../../Script/GameManager":void 0,"../../Script/Utils":void 0,"./HeroData":"HeroData","./HeroSkillManager":"HeroSkillManager","./HeroSpineManager":"HeroSpineManager","./PlayerState":"PlayerState"}],HeroSkillManager:[function(e,t,o){"use strict";cc._RF.push(t,"4f939IeyytP7q9K4jp1WbPi","HeroSkillManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.HeroSkillManager=void 0;var i=e("./HeroFight"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t.aoeSkillSoilPre=null,t.aoeSkillThunderPre=null,t.aoeSkillFirePre=null,t.aoeSkillIcePre=null,t.singleSoilPre=null,t.singleThunderPre=null,t.singleFirePre=null,t.singleIcePre=null,t._GamePanel=null,t}return r(t,e),t.prototype.onEnable=function(){this._GamePanel=cc.find("Canvas/GamePanel")},t.prototype.useAoeSkillSoil=function(){var e=cc.instantiate(this.aoeSkillSoilPre);this.setParent(e);var t=this.getPosFunc();e.setPosition(t.x+30,t.y-75),this.scheduleOnce(function(){e.destroy()},3),cc.systemEvent.emit("PLAY_SOUND","aoeSoil")},t.prototype.useAoeSkillThunder=function(){var e=cc.instantiate(this.aoeSkillThunderPre);this.setParent(e);var t=this.getPosFunc();e.setPosition(t.x+150,t.y+40),this.scheduleOnce(function(){e.destroy()},3),cc.systemEvent.emit("PLAY_SOUND","aoeThunder")},t.prototype.useAoeSkillFire=function(){var e=cc.instantiate(this.aoeSkillFirePre);this.setParent(e);var t=this.getPosFunc();e.setPosition(t.x+150,t.y+40),this.scheduleOnce(function(){e.destroy()},3)},t.prototype.useAoeSkillIce=function(){var e=cc.instantiate(this.aoeSkillIcePre);this.setParent(e);var t=this.getPosFunc();e.setPosition(t.x+80,t.y-70),this.scheduleOnce(function(){e.destroy()},3)},t.prototype.useSingleSoil=function(){var e=cc.instantiate(this.singleSoilPre);this.setParent(e);var t=this.getPosFunc();e.setPosition(t.x+20,t.y+10),this.scheduleOnce(function(){e.destroy()},2)},t.prototype.useSingleThunder=function(){var e=cc.instantiate(this.singleThunderPre);this.setParent(e);var t=this.getPosFunc();e.setPosition(t.x+20,t.y+10),this.scheduleOnce(function(){e.destroy()},2),cc.systemEvent.emit("PLAY_SOUND","singleThunder")},t.prototype.useSingleFire=function(){var e=cc.instantiate(this.singleFirePre);this.setParent(e);var t=this.getPosFunc();e.setPosition(t.x+60,t.y+50),this.scheduleOnce(function(){e.destroy()},2),cc.systemEvent.emit("PLAY_SOUND","singleFire")},t.prototype.useSingleIce=function(){var e=cc.instantiate(this.singleIcePre);this.setParent(e);var t=this.getPosFunc();e.setPosition(t.x+60,t.y+50),this.scheduleOnce(function(){e.destroy()},2),cc.systemEvent.emit("PLAY_SOUND","singleIce")},t.prototype.setParent=function(e){var t=null;null!=this.node.getComponent(i.HeroFight).curFightEnemy&&(t=this.node.getComponent(i.HeroFight).curFightEnemy.parent.parent,e.parent=t,e.zIndex=20)},t.prototype.getPosFunc=function(){var e=this.node.parent.convertToWorldSpaceAR(this.node.position),t=null;return null!=this.node.getComponent(i.HeroFight).curFightEnemy&&(this._GamePanel=this.node.getComponent(i.HeroFight).curFightEnemy.parent,t=this._GamePanel.convertToNodeSpaceAR(e)),t},a([l({type:sp.Skeleton,tooltip:"\u82f1\u96c4\u52a8\u753b"})],t.prototype,"spine",void 0),a([l({type:cc.Prefab,tooltip:"\u7fa4\u4f53\u571f\u6280\u80fd"})],t.prototype,"aoeSkillSoilPre",void 0),a([l({type:cc.Prefab,tooltip:"\u7fa4\u4f53\u96f7\u6280\u80fd"})],t.prototype,"aoeSkillThunderPre",void 0),a([l({type:cc.Prefab,tooltip:"\u7fa4\u4f53\u706b\u6280\u80fd"})],t.prototype,"aoeSkillFirePre",void 0),a([l({type:cc.Prefab,tooltip:"\u7fa4\u4f53\u51b0\u6280\u80fd"})],t.prototype,"aoeSkillIcePre",void 0),a([l({type:cc.Prefab,tooltip:"\u5355\u4f53\u571f\u6280\u80fd"})],t.prototype,"singleSoilPre",void 0),a([l({type:cc.Prefab,tooltip:"\u5355\u4f53\u96f7\u6280\u80fd"})],t.prototype,"singleThunderPre",void 0),a([l({type:cc.Prefab,tooltip:"\u5355\u4f53\u706b\u6280\u80fd"})],t.prototype,"singleFirePre",void 0),a([l({type:cc.Prefab,tooltip:"\u5355\u4f53\u51b0\u6280\u80fd"})],t.prototype,"singleIcePre",void 0),a([s],t)}(cc.Component);o.HeroSkillManager=p,cc._RF.pop()},{"./HeroFight":"HeroFight"}],HeroSpineManager:[function(e,t,o){"use strict";cc._RF.push(t,"b1fcdLeXfJJ4JpXt4zY6+jX","HeroSpineManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.HeroSpineManager=void 0;var i=e("../../Script/GameManager"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t.dust=null,t}return r(t,e),t.prototype.onEnable=function(){cc.systemEvent.on(i.GameManager.EEventName.GAME_WIN,this.win,this)},t.prototype.onDisable=function(){cc.systemEvent.off(i.GameManager.EEventName.GAME_WIN,this.win,this)},t.prototype.normalAttack=function(){this.spine.setAnimation(0,"gj",!1),this.spine.addAnimation(0,"daiji",!0)},t.prototype.singleSkillAttack=function(){this.spine.setAnimation(0,"gj1",!1)},t.prototype.aoeSkillAttack=function(){this.spine.setAnimation(0,"gj2",!1)},t.prototype.openBox=function(){this.spine.setAnimation(0,"kai",!1),this.spine.addAnimation(0,"daiji",!0)},t.prototype.win=function(){this.spine.setAnimation(0,"success",!0)},t.prototype.save=function(){this.spine.setAnimation(0,"gongzhu",!1),this.spine.addAnimation(0,"daiji",!0)},t.prototype.die=function(){Math.random()>.5?this.spine.setAnimation(0,"died1",!1):this.spine.setAnimation(0,"died2",!1)},t.prototype.fallDustDragon=function(){var e=this;this.dust.getComponent(dragonBones.ArmatureDisplay).playAnimation("siwangyanwu",1),this.scheduleOnce(function(){e.spine.node.active=!1},.33)},t.prototype.idle=function(){this.spine.addAnimation(0,"daiji",!0)},a([l({type:sp.Skeleton,tooltip:"\u82f1\u96c4\u52a8\u753b"})],t.prototype,"spine",void 0),a([l({type:cc.Node,tooltip:"\u7070\u5c18"})],t.prototype,"dust",void 0),a([s],t)}(cc.Component);o.HeroSpineManager=p,cc._RF.pop()},{"../../Script/GameManager":void 0}],LevelConfig:[function(e,t,o){"use strict";cc._RF.push(t,"fc339G576RE5bmPD0In6h+Q","LevelConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.LevelConfig=void 0;var n=cc.v2(-190,-470),r=cc.v2(190,-470),a=cc.v2(580,-470),i=function(){function e(){}return e.map=[{id:1,checkDis:210,roomWidth:300,startPos:cc.v2(-180,-380),castle:[1,2],castlePos:[cc.v2(-180,-470),cc.v2(180,-470)],heroData:2,roomMess:[{index:0,enemyArr:[],prop:[]},{index:1,enemyArr:[{floorIndex:0,posIndex:0,type:0,data:1},{floorIndex:1,posIndex:0,type:1,data:3}],prop:[]}]},{id:2,checkDis:210,roomWidth:300,startPos:cc.v2(-180,-380),castle:[1,2,3],castlePos:[cc.v2(-180,-470),cc.v2(180,-470),cc.v2(540,-470)],heroData:2,roomMess:[{index:0,enemyArr:[],prop:[]},{index:1,enemyArr:[{floorIndex:0,posIndex:0,type:0,data:2},{floorIndex:1,posIndex:0,type:1,data:4}],prop:[]},{index:2,enemyArr:[{floorIndex:0,posIndex:2,type:1,data:28},{floorIndex:1,posIndex:2,type:1,data:7},{floorIndex:2,posIndex:2,type:2,data:14}],prop:[]}]},{id:3,checkDis:210,roomWidth:300,startPos:cc.v2(-180,-380),castle:[1,4],castlePos:[cc.v2(-180,-470),cc.v2(180,-470)],heroData:3,roomMess:[{index:0,enemyArr:[],prop:[]},{index:1,enemyArr:[{floorIndex:0,posIndex:0,type:5,data:4},{floorIndex:1,posIndex:0,type:3,data:2},{floorIndex:1,posIndex:2,type:1,data:8},{floorIndex:2,posIndex:2,type:2,data:16}],prop:[{floorIndex:3,posIndex:0,type:1,data:-15},{floorIndex:3,posIndex:2,type:4,data:0}]}]},{id:4,checkDis:210,roomWidth:300,startPos:cc.v2(-180,-380),castle:[1,3,5],castlePos:[cc.v2(-180,-470),cc.v2(180,-470),cc.v2(540,-470)],heroData:2,roomMess:[{index:0,enemyArr:[],prop:[]},{index:1,enemyArr:[{floorIndex:0,posIndex:2,type:5,data:2},{floorIndex:1,posIndex:2,type:0,data:1},{floorIndex:2,posIndex:2,type:2,data:5}],prop:[{floorIndex:2,posIndex:0,type:2,data:0}]},{index:2,enemyArr:[{floorIndex:0,posIndex:0,type:3,data:3},{floorIndex:0,posIndex:2,type:1,data:6},{floorIndex:1,posIndex:0,type:5,data:18},{floorIndex:2,posIndex:0,type:0,data:1},{floorIndex:2,posIndex:2,type:0,data:2},{floorIndex:3,posIndex:2,type:0,data:2},{floorIndex:3,posIndex:0,type:2,data:40},{floorIndex:4,posIndex:0,type:0,data:70},{floorIndex:4,posIndex:2,type:6,data:100}],prop:[]}]},{id:5,checkDis:210,roomWidth:300,startPos:cc.v2(-180,-380),castle:[1,4,5],castlePos:[cc.v2(-180,-470),cc.v2(180,-470),cc.v2(540,-470)],heroData:1,roomMess:[{index:0,enemyArr:[],prop:[]},{index:1,enemyArr:[{floorIndex:0,posIndex:0,type:5,data:1},{floorIndex:0,posIndex:2,type:1,data:3},{floorIndex:1,posIndex:2,type:0,data:2},{floorIndex:2,posIndex:0,type:3,data:6},{floorIndex:3,posIndex:0,type:4,data:20}],prop:[{floorIndex:2,posIndex:2,type:0,data:10}]},{index:2,enemyArr:[{floorIndex:0,posIndex:0,type:3,data:5},{floorIndex:0,posIndex:2,type:3,data:25},{floorIndex:1,posIndex:0,type:5,data:70},{floorIndex:2,posIndex:0,type:0,data:5},{floorIndex:2,posIndex:2,type:0,data:3},{floorIndex:3,posIndex:0,type:2,data:5},{floorIndex:3,posIndex:2,type:0,data:3},{floorIndex:4,posIndex:2,type:8,data:160}],prop:[]}]},{id:6,checkDis:210,roomWidth:300,startPos:cc.v2(-180,-380),castle:[1,3,3,4],castlePos:[cc.v2(-190,-470),cc.v2(190,-470),cc.v2(570,-470),cc.v2(950,-470)],heroData:3,roomMess:[{index:0,enemyArr:[],prop:[]},{index:1,enemyArr:[{floorIndex:0,posIndex:2,type:5,data:5},{floorIndex:1,posIndex:2,type:0,data:1},{floorIndex:2,posIndex:2,type:3,data:1}],prop:[]},{index:2,enemyArr:[{floorIndex:0,posIndex:0,type:2,data:30},{floorIndex:1,posIndex:0,type:3,data:5},{floorIndex:1,posIndex:2,type:1,data:15},{floorIndex:2,posIndex:2,type:0,data:3}],prop:[{floorIndex:2,posIndex:0,type:1,data:-5}]},{index:3,enemyArr:[{floorIndex:0,posIndex:0,type:3,data:20},{floorIndex:0,posIndex:2,type:0,data:10},{floorIndex:1,posIndex:0,type:5,data:88},{floorIndex:1,posIndex:2,type:1,data:5},{floorIndex:2,posIndex:0,type:0,data:5},{floorIndex:2,posIndex:2,type:1,data:20},{floorIndex:3,posIndex:2,type:0,data:202}],prop:[]}]},{id:7,checkDis:210,roomWidth:300,startPos:cc.v2(-180,-380),castle:[1,4,5],castlePos:[cc.v2(-190,-470),cc.v2(190,-470),cc.v2(570,-470)],heroData:5,roomMess:[{index:0,enemyArr:[],prop:[]},{index:1,enemyArr:[{floorIndex:0,posIndex:2,type:0,data:30},{floorIndex:1,posIndex:0,type:5,data:2},{floorIndex:1,posIndex:2,type:5,data:2},{floorIndex:2,posIndex:2,type:2,data:40}],prop:[{floorIndex:0,posIndex:0,type:0,data:30},{floorIndex:3,posIndex:0,type:1,data:-1},{floorIndex:3,posIndex:2,type:4,data:0}]},{index:2,enemyArr:[{floorIndex:0,posIndex:0,type:3,data:5},{floorIndex:1,posIndex:0,type:5,data:2},{floorIndex:2,posIndex:0,type:0,data:10},{floorIndex:2,posIndex:2,type:0,data:10},{floorIndex:3,posIndex:2,type:2,data:40},{floorIndex:4,posIndex:2,type:7,data:70}],prop:[{floorIndex:3,posIndex:0,type:1,data:-90}]}]},{id:8,checkDis:210,roomWidth:300,startPos:cc.v2(-180,-380),castle:[1,4],castlePos:[cc.v2(-180,-470),cc.v2(180,-470)],heroData:4,roomMess:[{index:0,enemyArr:[],prop:[]},{index:1,enemyArr:[{floorIndex:0,posIndex:2,type:0,data:20},{floorIndex:2,posIndex:0,type:2,data:10}],prop:[{floorIndex:1,posIndex:0,type:5,data:6},{floorIndex:3,posIndex:0,type:1,data:-15},{floorIndex:3,posIndex:2,type:3,data:0}]}]},{id:9,checkDis:210,roomWidth:300,startPos:cc.v2(-190,-380),castle:[1,4,3,4],castlePos:[cc.v2(-190,-470),cc.v2(190,-470),cc.v2(570,-470),cc.v2(950,-470)],heroData:10,roomMess:[{index:0,enemyArr:[],prop:[]},{index:1,enemyArr:[{floorIndex:0,posIndex:0,type:0,data:10},{floorIndex:0,posIndex:2,type:0,data:40},{floorIndex:1,posIndex:0,type:1,data:20},{floorIndex:1,posIndex:2,type:1,data:80},{floorIndex:2,posIndex:0,type:2,data:150},{floorIndex:2,posIndex:2,type:2,data:300},{floorIndex:3,posIndex:0,type:6,data:600}],prop:[{floorIndex:3,posIndex:2,type:0,data:400}]},{index:2,enemyArr:[{floorIndex:0,posIndex:0,type:5,data:50},{floorIndex:0,posIndex:2,type:5,data:50},{floorIndex:1,posIndex:0,type:1,data:1500},{floorIndex:1,posIndex:2,type:1,data:60},{floorIndex:2,posIndex:2,type:7,data:2e3}],prop:[]},{index:3,enemyArr:[{floorIndex:0,posIndex:0,type:0,data:50},{floorIndex:0,posIndex:2,type:0,data:50},{floorIndex:1,posIndex:0,type:5,data:100},{floorIndex:1,posIndex:2,type:5,data:100},{floorIndex:2,posIndex:0,type:2,data:4850},{floorIndex:2,posIndex:2,type:2,data:5700},{floorIndex:3,posIndex:2,type:8,data:17120}],prop:[]}]},{id:10,checkDis:210,roomWidth:300,startPos:cc.v2(-180,-380),castle:[1,4,5],castlePos:[cc.v2(-190,-470),cc.v2(190,-470),cc.v2(570,-470)],heroData:10,roomMess:[{index:0,enemyArr:[],prop:[]},{index:1,enemyArr:[{floorIndex:0,posIndex:0,type:5,data:25},{floorIndex:1,posIndex:0,type:5,data:2},{floorIndex:1,posIndex:2,type:5,data:5},{floorIndex:2,posIndex:0,type:5,data:17},{floorIndex:3,posIndex:2,type:5,data:10}],prop:[]},{index:2,enemyArr:[{floorIndex:0,posIndex:0,type:3,data:2},{floorIndex:0,posIndex:2,type:3,data:3},{floorIndex:1,posIndex:0,type:0,data:21},{floorIndex:1,posIndex:2,type:0,data:22},{floorIndex:3,posIndex:0,type:1,data:120},{floorIndex:3,posIndex:2,type:1,data:200},{floorIndex:4,posIndex:2,type:8,data:300}],prop:[{floorIndex:2,posIndex:0,type:1,data:-50},{floorIndex:2,posIndex:2,type:5,data:60}]}]},{id:11,checkDis:210,roomWidth:300,startPos:cc.v2(-180,-380),castle:[1,4,5],castlePos:[cc.v2(-190,-470),cc.v2(190,-470),cc.v2(580,-470)],heroData:80,roomMess:[{index:0,enemyArr:[],prop:[]},{index:1,enemyArr:[{floorIndex:0,posIndex:0,type:0,data:90},{floorIndex:1,posIndex:2,type:1,data:180},{floorIndex:2,posIndex:2,type:2,data:360},{floorIndex:3,posIndex:2,type:7,data:720}],prop:[{floorIndex:1,posIndex:0,type:0,data:10}]},{index:2,enemyArr:[{floorIndex:0,posIndex:0,type:5,data:30},{floorIndex:0,posIndex:2,type:5,data:40},{floorIndex:1,posIndex:0,type:1,data:1500},{floorIndex:1,posIndex:2,type:1,data:3e3},{floorIndex:2,posIndex:2,type:3,data:7500},{floorIndex:3,posIndex:2,type:6,data:15e3},{floorIndex:4,posIndex:2,type:7,data:3e4}],prop:[{floorIndex:2,posIndex:0,type:5,data:1500}]}]},{id:12,checkDis:210,roomWidth:300,startPos:cc.v2(-180,-380),castle:[1,4,4],castlePos:[cc.v2(-190,-470),cc.v2(190,-470),cc.v2(580,-470)],heroData:100,roomMess:[{index:0,enemyArr:[],prop:[]},{index:1,enemyArr:[{floorIndex:0,posIndex:0,type:3,data:400},{floorIndex:1,posIndex:0,type:3,data:200},{floorIndex:1,posIndex:2,type:3,data:800},{floorIndex:2,posIndex:0,type:3,data:100},{floorIndex:2,posIndex:2,type:3,data:1600},{floorIndex:3,posIndex:2,type:3,data:3250}],prop:[{floorIndex:0,posIndex:2,type:2,data:0}]},{index:2,enemyArr:[{floorIndex:0,posIndex:2,type:0,data:9e3},{floorIndex:1,posIndex:2,type:1,data:3800},{floorIndex:2,posIndex:0,type:6,data:18e3}],prop:[{floorIndex:0,posIndex:0,type:0,data:1500},{floorIndex:1,posIndex:0,type:5,data:500},{floorIndex:3,posIndex:0,type:1,data:-1e4},{floorIndex:3,posIndex:2,type:3,data:0}]}]},{id:13,checkDis:210,roomWidth:300,startPos:cc.v2(-180,-380),castle:[1,5,5],castlePos:[cc.v2(-190,-470),cc.v2(190,-470),cc.v2(580,-470)],heroData:150,roomMess:[{index:0,enemyArr:[],prop:[]},{index:1,enemyArr:[{floorIndex:0,posIndex:0,type:0,data:150},{floorIndex:0,posIndex:2,type:0,data:300},{floorIndex:1,posIndex:0,type:1,data:600},{floorIndex:1,posIndex:2,type:1,data:1200},{floorIndex:2,posIndex:0,type:2,data:2400},{floorIndex:3,posIndex:0,type:6,data:4800},{floorIndex:4,posIndex:0,type:4,data:9600}],prop:[]},{index:2,enemyArr:[{floorIndex:0,posIndex:0,type:3,data:200},{floorIndex:0,posIndex:2,type:3,data:200},{floorIndex:1,posIndex:0,type:5,data:1500},{floorIndex:1,posIndex:2,type:5,data:2e3},{floorIndex:2,posIndex:0,type:5,data:4e3},{floorIndex:3,posIndex:0,type:7,data:17500},{floorIndex:4,posIndex:0,type:8,data:35e3}],prop:[]}]},{id:14,checkDis:210,roomWidth:300,startPos:cc.v2(-180,-380),castle:[1,5,4],castlePos:[cc.v2(-190,-470),cc.v2(190,-470),cc.v2(580,-470)],heroData:180,roomMess:[{index:0,enemyArr:[],prop:[]},{index:1,enemyArr:[{floorIndex:0,posIndex:0,type:6,data:1999},{floorIndex:1,posIndex:0,type:5,data:999},{floorIndex:2,posIndex:0,type:1,data:240},{floorIndex:3,posIndex:0,type:0,data:110},{floorIndex:4,posIndex:0,type:4,data:1200}],prop:[{floorIndex:1,posIndex:2,type:2,data:0},{floorIndex:2,posIndex:2,type:0,data:690},{floorIndex:3,posIndex:2,type:5,data:400}]},{index:2,enemyArr:[{floorIndex:1,posIndex:0,type:1,data:2e3},{floorIndex:1,posIndex:2,type:2,data:14e3},{floorIndex:2,posIndex:2,type:7,data:4e4}],prop:[{floorIndex:0,posIndex:0,type:1,data:-3e3},{floorIndex:0,posIndex:2,type:0,data:18500},{floorIndex:3,posIndex:0,type:1,data:-3e4},{floorIndex:3,posIndex:2,type:3,data:0}]}]},{id:15,checkDis:210,roomWidth:300,startPos:cc.v2(-180,-380),castle:[1,5,5],castlePos:[n,r,a],heroData:200,roomMess:[{index:0,enemyArr:[],prop:[]},{index:1,enemyArr:[{floorIndex:0,posIndex:2,type:6,data:5e3},{floorIndex:1,posIndex:0,type:2,data:1500},{floorIndex:3,posIndex:0,type:1,data:250},{floorIndex:4,posIndex:0,type:7,data:1e4}],prop:[{floorIndex:1,posIndex:2,type:0,data:3e3},{floorIndex:2,posIndex:2,type:5,data:600},{floorIndex:3,posIndex:2,type:0,data:500},{floorIndex:2,posIndex:0,type:1,data:-50}]},{index:2,enemyArr:[{floorIndex:0,posIndex:0,type:2,data:49900},{floorIndex:1,posIndex:0,type:5,data:500},{floorIndex:1,posIndex:2,type:5,data:1e3},{floorIndex:2,posIndex:0,type:5,data:1e3},{floorIndex:2,posIndex:2,type:5,data:2e3},{floorIndex:3,posIndex:0,type:1,data:23500},{floorIndex:4,posIndex:0,type:8,data:99900}],prop:[{floorIndex:3,posIndex:2,type:0,data:2e3}]}]},{id:16,checkDis:210,roomWidth:300,startPos:cc.v2(-180,-380),castle:[1,5,3,5],castlePos:[cc.v2(-190,-470),cc.v2(190,-470),cc.v2(580,-470),cc.v2(960,-470)],heroData:220,roomMess:[{index:0,enemyArr:[],prop:[]},{index:1,enemyArr:[{floorIndex:0,posIndex:0,type:0,data:530},{floorIndex:0,posIndex:2,type:0,data:800},{floorIndex:1,posIndex:0,type:1,data:300},{floorIndex:1,posIndex:2,type:1,data:1500},{floorIndex:2,posIndex:0,type:0,data:150},{floorIndex:2,posIndex:2,type:2,data:3e3},{floorIndex:3,posIndex:2,type:6,data:6e3},{floorIndex:4,posIndex:2,type:4,data:12e3}],prop:[]},{index:2,enemyArr:[],prop:[{floorIndex:0,posIndex:0,type:1,data:-1500},{floorIndex:0,posIndex:2,type:0,data:3e3},{floorIndex:1,posIndex:0,type:0,data:1e3},{floorIndex:1,posIndex:2,type:0,data:1e3},{floorIndex:2,posIndex:0,type:5,data:1e3},{floorIndex:2,posIndex:2,type:5,data:1e3}]},{index:3,enemyArr:[{floorIndex:0,posIndex:2,type:3,data:500},{floorIndex:1,posIndex:0,type:3,data:1500},{floorIndex:1,posIndex:2,type:5,data:1e3},{floorIndex:2,posIndex:0,type:5,data:3e3},{floorIndex:2,posIndex:2,type:5,data:5e3},{floorIndex:3,posIndex:2,type:7,data:4e4},{floorIndex:4,posIndex:0,type:8,data:99900}],prop:[{floorIndex:0,posIndex:0,type:2,data:0}]}]},{id:17,checkDis:210,roomWidth:300,startPos:cc.v2(-180,-380),castle:[1,5,5,5],castlePos:[cc.v2(-190,-470),cc.v2(190,-470),cc.v2(580,-470),cc.v2(960,-470)],heroData:260,roomMess:[{index:0,enemyArr:[],prop:[]},{index:1,enemyArr:[{floorIndex:1,posIndex:0,type:0,data:280},{floorIndex:1,posIndex:2,type:1,data:600},{floorIndex:2,posIndex:0,type:1,data:100},{floorIndex:2,posIndex:2,type:2,data:3e3},{floorIndex:3,posIndex:2,type:6,data:6e3},{floorIndex:4,posIndex:2,type:4,data:12e3}],prop:[{floorIndex:0,posIndex:0,type:1,data:-1e3},{floorIndex:0,posIndex:2,type:0,data:3e3}]},{index:2,enemyArr:[{floorIndex:0,posIndex:0,type:3,data:2e3},{floorIndex:1,posIndex:0,type:0,data:3e3},{floorIndex:2,posIndex:0,type:1,data:6e3},{floorIndex:3,posIndex:0,type:5,data:5e3},{floorIndex:4,posIndex:0,type:7,data:39900}],prop:[]},{index:3,enemyArr:[{floorIndex:0,posIndex:0,type:3,data:5e3},{floorIndex:0,posIndex:2,type:5,data:5e3},{floorIndex:1,posIndex:2,type:6,data:12e3},{floorIndex:2,posIndex:2,type:2,data:24e3},{floorIndex:3,posIndex:0,type:7,data:5e4},{floorIndex:4,posIndex:0,type:8,data:125e3}],prop:[]}]}],e}();o.LevelConfig=i,cc._RF.pop()},{}],MapMess:[function(e,t,o){"use strict";cc._RF.push(t,"8e642iWp1VMJKynlK3fsvbG","MapMess");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.MapMess=void 0;var i=e("../../Script/GameDataCenter"),c=e("./LevelConfig"),s=cc._decorator,l=s.ccclass,p=s.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.castlePre=null,t.roomPre=null,t.enemyArr=[],t.prefabArr=[],t._levelMess=null,t}var o;return r(t,e),o=t,t.prototype.onEnable=function(){i.GameDataCenter.haveProp=!1,i.GameDataCenter.getFinalProp=!1,i.GameDataCenter.killEnemy=0,i.GameDataCenter.totleCastle=0,i.GameDataCenter.totleEnemy=0,this._levelMess=c.LevelConfig.map[i.GameDataCenter.chooseLevel-1],o.castleLength=c.LevelConfig.map[i.GameDataCenter.chooseLevel-1].roomMess.length,this.loadCastle(),this.scheduleOnce(this.castleAddEnemy,0),this.addEquipemnt()},t.prototype.onDisable=function(){for(var e=0;e<o.castleArr.length;e++)o.castleArr[e].destroy();o.castleArr=[]},t.prototype.loadCastle=function(){for(var e=0;e<this._levelMess.castle.length;e++){var t=cc.instantiate(this.castlePre);t.parent=this.node;var n=this._levelMess.castlePos[e];cc.view.getVisibleSize().height/cc.view.getVisibleSize().width>=2?t.setPosition(n.x,n.y-160):t.setPosition(n),t.height=this._levelMess.castle[e]*this._levelMess.checkDis,t.width=this._levelMess.roomWidth;var r=t.getComponent(cc.BoxCollider);r.size.width=t.width,r.size.height=t.height,r.offset.y=r.size.height/2;var a=this._levelMess.roomMess[e].index;t.getComponent(cc.BoxCollider).tag=this._levelMess.roomMess[e].index;var i=this._levelMess.roomMess[e].enemyArr.length+this._levelMess.roomMess[e].prop.length;t.getComponent("Castle").setData(i,a),o.castleArr.push(t);for(var c=0;c<this._levelMess.castle[e];c++)this.castleAddRoom(c,t.getChildByName("roomManager"),a)}},t.prototype.castleAddRoom=function(e,t,o){var n=cc.instantiate(this.roomPre);n.parent=t,n.y=n.height*e+n.height/2,n.getComponent(cc.BoxCollider).tag=e,n.zIndex=10,n.getComponent("Room").setData(o,e),0==o&&(n.group="selfRoom")},t.prototype.castleAddEnemy=function(){for(var e=0;e<this._levelMess.roomMess.length;e++)for(var t=this._levelMess.roomMess[e].enemyArr,n=0;n<t.length;n++){i.GameDataCenter.totleEnemy++,cc.systemEvent.emit(i.GameDataCenter.EEventName.UPDATE_ENEMY_COUNT);var r=t[n].type,a=cc.instantiate(this.enemyArr[r]),c=t[n].floorIndex,s=o.castleArr[e].getChildByName("roomManager").children[c];a.parent=s.getChildByName("enemyManager"),a.getComponent("Enemy").setData(t[n].data,this._levelMess.roomMess[e].index,c,t[n].posIndex,r);var l=t[n].posIndex;0==l?a.setPosition(0,-80):-2==l?a.setPosition(-s.width/5,-80):2==l&&a.setPosition(s.width/3,-80)}},t.prototype.addEquipemnt=function(){for(var e=0;e<this._levelMess.roomMess.length;e++)for(var t=this._levelMess.roomMess[e].prop,n=0;n<t.length;n++){var r=null,a=null;r=cc.instantiate(this.prefabArr[t[n].type]);var c=t[n].floorIndex;a=o.castleArr[e].getChildByName("roomManager").children[c],r.parent=a.getChildByName("enemyManager"),3==t[n].type||4==t[n].type?i.GameDataCenter.haveProp=!0:r.getComponent("Equipment").setData(t[n].data,t[n].posIndex),r.getComponent(cc.BoxCollider).tag=t[n].type;var s=t[n].posIndex;0==s?r.setPosition(0,0):-2==s?r.setPosition(-a.width/4,0):2==s&&r.setPosition(a.width/3,0)}},t.castleArr=[],t.castleLength=0,a([p({type:cc.Prefab,tooltip:"\u57ce\u5821\u9884\u5236\u4f53"})],t.prototype,"castlePre",void 0),a([p({type:cc.Prefab,tooltip:"\u623f\u95f4\u9884\u5236\u4f53"})],t.prototype,"roomPre",void 0),a([p({type:cc.Prefab,tooltip:"\u654c\u4eba\u9884\u5236\u4f53\u6570\u7ec4"})],t.prototype,"enemyArr",void 0),a([p({type:cc.Prefab,tooltip:"\u9053\u5177\u9884\u7f6e\u4f53\u6570\u7ec4"})],t.prototype,"prefabArr",void 0),o=a([l],t)}(cc.Component);o.MapMess=d,cc._RF.pop()},{"../../Script/GameDataCenter":void 0,"./LevelConfig":"LevelConfig"}],PlayerCollision:[function(e,t,o){"use strict";cc._RF.push(t,"b9ba67M1QFLSK7k846WdjiV","PlayerCollision");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerCollision=void 0;var i=e("../../Script/GameDataCenter"),c=e("../../Script/UIManager"),s=e("./HeroData"),l=e("./HeroFight"),p=e("./HeroSpineManager"),d=e("./PlayerState"),y=e("./TouchLayer"),h=cc._decorator,u=h.ccclass,f=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.HeroFight=null,t.HeroData=null,t.collisionCount=0,t}return r(t,e),t.prototype.onEnable=function(){cc.systemEvent.on("PLAYER_SET_POS",this.onChangePosEvent,this)},t.prototype.onDisable=function(){cc.systemEvent.off("PLAYER_SET_POS",this.onChangePosEvent,this)},t.prototype.onCollisionEnter=function(e,t){var o=e.node.group;if(0==t.tag)switch(o){case"room":i.GameDataCenter.colliderRoomIndex=e.tag,this.setRoomMess(e.node),this.checkCastle(e),1==d.PlayerState.heroState&&(i.GameDataCenter.roomEnemyCount=e.node.getChildByName("enemyManager").childrenCount);break;case"castle":i.GameDataCenter.curCastleIndex=e.tag}else if(1==t.tag)switch("room"!=o&&"castle"!=o&&(d.PlayerState.heroState=0),o){case"enemy":this.node.getComponent("HeroFight").curFightEnemy=e.node,this.HeroFight.fightFunc();break;case"equipment":this.getPropFunc(e);break;case"statue":c.UIManager.open("Game/StatuePanel");break;case"princess":i.GameDataCenter.getFinalProp=!0,cc.systemEvent.emit("PASS_LEVEL")}},t.prototype.onCollisionStay=function(e,t){"room"==e.node.group&&1==d.PlayerState.heroState&&(i.GameDataCenter.roomEnemyCount=e.node.getChildByName("enemyManager").childrenCount),"player"!=t.node.group||i.GameDataCenter.curCastleIndex||(i.GameDataCenter.curCastleIndex=e.tag)},t.prototype.onCollisionExit=function(e){"room"==e.node.group?this.collisionExitLogic(e):"castle"==e.node.group&&(i.GameDataCenter.tempCastleIndex=e.tag)},t.prototype.checkCastle=function(e){var t=e.node.parent.convertToWorldSpaceAR(e.node.getPosition()),o=this.posChange(e.node.parent,this.node.parent,t);if(this.node.parent.convertToNodeSpaceAR(t),d.PlayerState.moveLimit)i.GameDataCenter.tempRoomPos.sub(i.GameDataCenter.standRoomPos).mag()<=e.node.height+100?this.setGameDate(o):d.PlayerState.playerCanMove=!1;else{var n=e.node.parent.convertToWorldSpaceAR(e.node.getPosition());i.GameDataCenter.standRoomPos=i.GameDataCenter.curRoomPos=n,this.setGameDate(o),i.GameDataCenter.standRoomIndex=i.GameDataCenter.lastRoomTag=e.tag}},t.prototype.setGameDate=function(e){d.PlayerState.playerCanMove=!0,y.TouchLayer.nextPos=e},t.prototype.collisionExitLogic=function(e){"player"==this.node.group&&"room"==e.node.group&&(i.GameDataCenter.lastRoomTag=e.tag)},t.prototype.onChangePosEvent=function(){"player"==this.node.group&&this.scheduleOnce(function(){i.GameDataCenter.standRoomPos=i.GameDataCenter.tempRoomPos,i.GameDataCenter.standRoomIndex=i.GameDataCenter.colliderRoomIndex},0)},t.prototype.posChange=function(e,t,o){return cc.v2(0,0),t.convertToNodeSpaceAR(o)},t.prototype.getPropFunc=function(e){var t=e.node.getComponent("Equipment").data;this.HeroData.setDataFunc(t),1==e.tag?this.node.getComponent(p.HeroSpineManager).normalAttack():4==e.tag&&this.node.getComponent("HeroSpineManager").openBox()},t.prototype.setRoomMess=function(e){var t=e.parent.convertToWorldSpaceAR(e.getPosition());if(i.GameDataCenter.tempRoomPos=t,i.GameDataCenter.roomWidth=e.width,i.GameDataCenter.roomEnemyCount=e.getChildByName("enemyManager").childrenCount,1==i.GameDataCenter.roomEnemyCount){var o=e.getChildByName("enemyManager").children[0];if("enemy"==o.group){if(null==o.getComponent("Enemy"))return;y.TouchLayer.singleEnemyPosIndex=o.getComponent("Enemy").posIndex}else{if(null==o.getComponent("Equipment"))return;y.TouchLayer.singleEnemyPosIndex=o.getComponent("Equipment").posIndex}}},a([f({type:l.HeroFight,tooltip:"\u6218\u6597\u7ba1\u7406"})],t.prototype,"HeroFight",void 0),a([f({type:s.HeroData,tooltip:"\u82f1\u96c4\u5c5e\u6027\u7ba1\u7406"})],t.prototype,"HeroData",void 0),a([u],t)}(cc.Component);o.PlayerCollision=m,cc._RF.pop()},{"../../Script/GameDataCenter":void 0,"../../Script/UIManager":void 0,"./HeroData":"HeroData","./HeroFight":"HeroFight","./HeroSpineManager":"HeroSpineManager","./PlayerState":"PlayerState","./TouchLayer":"TouchLayer"}],PlayerState:[function(e,t,o){"use strict";cc._RF.push(t,"cbf87j6r1RBvJN0XkiBCHOX","PlayerState");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerState=void 0;var i=e("../../Script/GameDataCenter"),c=e("../../Script/GameManager"),s=e("./LevelConfig"),l=e("./TouchLayer"),p=cc._decorator,d=p.ccclass,y=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,Object.defineProperty(t,"heroState",{get:function(){return o._heroState},set:function(e){o._heroState=e},enumerable:!1,configurable:!0}),t.prototype.onEnable=function(){cc.systemEvent.on(c.GameManager.EEventName.HERO_MOVE,this.onMoveEvent,this),cc.systemEvent.on("SET_HERO_STATE",this.onSetStateEvent,this),cc.systemEvent.on(o.EEventName.SET_MOVE_STATE,this.onSetMoveStateEvent,this)},t.prototype.onDisable=function(){cc.systemEvent.off(c.GameManager.EEventName.HERO_MOVE,this.onMoveEvent,this),cc.systemEvent.off("SET_HERO_STATE",this.onSetStateEvent,this),cc.systemEvent.off(o.EEventName.SET_MOVE_STATE,this.onSetMoveStateEvent,this),o.heroState=null},t.prototype.start=function(){var e=s.LevelConfig.map[i.GameDataCenter.chooseLevel-1].startPos;cc.view.getVisibleSize().height/cc.view.getVisibleSize().width>=2?this.node.setPosition(e.x,e.y-160):this.node.setPosition(e),i.GameDataCenter.heroCurPos=this.node.getPosition(),cc.systemEvent.emit("PLAY_SOUND","out")},t.prototype.onMoveEvent=function(e){var t=e;cc.tween(this.node).by(.5,{y:t}).start(),i.GameDataCenter.standRoomPos.y+=t,i.GameDataCenter.heroCurPos.y+=t,l.TouchLayer.nextPos.y+=t},t.prototype.onSetStateEvent=function(e,t){var n=t;this.scheduleOnce(function(){o.heroState=e},n)},t.prototype.onSetMoveStateEvent=function(){o.playerCanMove=!1,o.moveLimit=!1},t._heroState=null,t.moveLimit=!1,t.playerCanMove=!1,t.EEventName={PASS_LEVEL:"PASS_LEVEL",SET_HERO_STATE:"SET_HERO_STATE",SET_MOVE_STATE:"SET_MOVE_STATE"},o=a([d],t)}(cc.Component));o.PlayerState=y,cc._RF.pop()},{"../../Script/GameDataCenter":void 0,"../../Script/GameManager":void 0,"./LevelConfig":"LevelConfig","./TouchLayer":"TouchLayer"}],Princess:[function(e,t,o){"use strict";cc._RF.push(t,"cc18c25dTZJJ4mH3aCPVFUF","Princess");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.Princess=void 0;var i=e("../../../Script/GameManager"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t}return r(t,e),t.prototype.onEnable=function(){cc.systemEvent.on(i.GameManager.EEventName.GAME_WIN,this.onGameWinEvent,this),cc.systemEvent.on(i.GameManager.EEventName.GAME_OVER,this.onGameOverEvent,this)},t.prototype.onDisable=function(){cc.systemEvent.off(i.GameManager.EEventName.GAME_WIN,this.onGameWinEvent,this),cc.systemEvent.off(i.GameManager.EEventName.GAME_OVER,this.onGameOverEvent,this)},t.prototype.onGameWinEvent=function(){this.spine.setAnimation(0,"success",!1),this.scheduleOnce(function(){cc.systemEvent.emit(i.GameManager.EEventName.ENEMY_DIE)},.5)},t.prototype.onGameOverEvent=function(){this.spine.setAnimation(0,"failure",!1)},a([l({type:sp.Skeleton,tooltip:"\u516c\u4e3bspine"})],t.prototype,"spine",void 0),a([s],t)}(cc.Component);o.Princess=p,cc._RF.pop()},{"../../../Script/GameManager":void 0}],Room:[function(e,t,o){"use strict";cc._RF.push(t,"083b1QenGFP2pec2W0jb7L0","Room");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.Room=void 0;var i=e("../../Script/GameDataCenter"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lightIcon=null,t.roomIndex=0,t._castleIndex=0,t}return r(t,e),t.prototype.onEnable=function(){cc.systemEvent.on("CHECK_ROOM_LIGHT",this.onLightEvent,this),cc.systemEvent.on("ROOM_LIGHT_HIDE",this.onLightHide,this)},t.prototype.onDisable=function(){cc.systemEvent.off("CHECK_ROOM_LIGHT",this.onLightEvent,this),cc.systemEvent.off("ROOM_LIGHT_HIDE",this.onLightHide,this)},t.prototype.setData=function(e,t){this._castleIndex=e,this.roomIndex=t},t.prototype.onLightEvent=function(e){var t=this;this.scheduleOnce(function(){if(0!=t.node.getChildByName("enemyManager").children.length){var o=t.node.parent.parent.getComponent("Castle").type;if(e==o){var n=t.node.parent.convertToWorldSpaceAR(t.node.getPosition());i.GameDataCenter.tempRoomPos.sub(n).mag()<310&&(t.lightIcon.active=!0,cc.tween(t.lightIcon).repeatForever(cc.tween().delay(4).to(.15,{opacity:50}).to(.15,{opacity:255}).to(.15,{opacity:50}).to(.15,{opacity:255})).start())}}},.1)},t.prototype.onLightHide=function(){this.lightIcon.stopAllActions(),this.lightIcon.active=!1},a([l({type:cc.Node,tooltip:"\u53d1\u4eae\u56fe\u7247"})],t.prototype,"lightIcon",void 0),a([s],t)}(cc.Component);o.Room=p,cc._RF.pop()},{"../../Script/GameDataCenter":void 0}],ShowDataAdd:[function(e,t,o){"use strict";cc._RF.push(t,"e0328OOUmVGpK/SD4IMDW2r","ShowDataAdd");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.ShowDataAdd=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.numDisplay=null,t}return r(t,e),t.prototype.setData=function(e,t){this.showData(e,t)},t.prototype.showData=function(e,t){if(Math.abs(e)>=1e3){var o=e/1e3;this.numDisplay.string=o>0?"+"+o+"K":o+"K"}else this.numDisplay.string=e>0?"+"+e:""+e;1==t&&(this.numDisplay.node.color=cc.color(3,129,255))},a([s({type:cc.Label,tooltip:"\u6570\u503clabel"})],t.prototype,"numDisplay",void 0),a([c],t)}(cc.Component);o.ShowDataAdd=l,cc._RF.pop()},{}],SkillConfig:[function(e,t,o){"use strict";cc._RF.push(t,"c2436+uzctFt4/ccUCKO+8d","SkillConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.SkillConfig=void 0;var n=function(){function e(){}return e.skill=[{level:1,skillMess:[[]]},{level:2,skillMess:[[0,1,3]]},{level:3,skillMess:[]},{level:4,skillMess:[[5,0,4]]},{level:5,skillMess:[[3,5,6]]},{level:6,skillMess:[[3,2,1],[7,0,4]]},{level:7,skillMess:[[3,0,1]]},{level:8,skillMess:[[]]},{level:9,skillMess:[[2,1,5],[7,0,4]]},{level:10,skillMess:[[4,5,6]]},{level:11,skillMess:[[1,0,6]]},{level:12,skillMess:[[4,0,6]]},{level:13,skillMess:[[1,7,5]]},{level:14,skillMess:[[0,2,3]]},{level:15,skillMess:[[5,0,1]]},{level:16,skillMess:[[5,7,1],[2,3,7]]},{level:17,skillMess:[[2,0,1],[3,5,6]]},{level:18,skillMess:[[5,2,1],[0,1,4]]},{level:19,skillMess:[[2,6,3],[0,7,1]]},{level:20,skillMess:[[0,7,1],[2,6,3]]}],e}();o.SkillConfig=n,cc._RF.pop()},{}],SkillPanel:[function(e,t,o){"use strict";cc._RF.push(t,"d728dgp8Y5ICrnKDRoqbkpX","SkillPanel");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.SkillPanel=void 0;var i=e("../Script/GameDataCenter"),c=e("../Script/GameManager"),s=e("../Script/UIManager"),l=e("../Script/Utils"),p=e("./Script/SkillConfig"),d=cc._decorator,y=d.ccclass,h=d.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skillPre=null,t.skillDesDisplay=null,t.skillManager=null,t.changeBtn=null,t.coinChangeBtn=null,t.payCoinDisplay=null,t._chooseIndex=0,t._strArr=["<outline colol = white width = 2><color=#000000>\u989d\u5916\u5bf9\u5f53\u524d\u5355\u4f53\u76ee\u6807\u9020\u6210</c><color=blue>10%</color><color=#000000>\u51b0\u5c5e\u6027<br/>\u5355\u4f53\u4f24\u5bb3</c>","<outline colol = white width = 2><color=#000000>\u989d\u5916\u5bf9\u5f53\u524d\u5355\u4f53\u76ee\u6807\u9020\u6210</c><color=blue>10%</color><color=#000000>\u706b\u5c5e\u6027<br/>\u5355\u4f53\u4f24\u5bb3</c>","<outline colol = white width = 2><color=#000000>\u989d\u5916\u5bf9\u5f53\u524d\u5355\u4f53\u76ee\u6807\u9020\u6210</c><color=blue>10%</color><color=#000000>\u96f7\u5c5e\u6027<br/>\u5355\u4f53\u4f24\u5bb3</c>","<outline colol = white width = 2><color=#000000>\u989d\u5916\u5bf9\u5f53\u524d\u5355\u4f53\u76ee\u6807\u9020\u6210</c><color=blue>10%</color><color=#000000>\u571f\u5c5e\u6027<br/>\u5355\u4f53\u4f24\u5bb3</c>","<outline colol = white width = 2><color=#000000>\u989d\u5916\u5bf9\u6240\u6709\u654c\u4eba\u9020\u6210</c><color=blue>5%</color><color=#000000>\u51b0\u5c5e\u6027<br/>\u7fa4\u4f53\u4f24\u5bb3</c>","<outline colol = white width = 2><color=#000000>\u989d\u5916\u5bf9\u6240\u6709\u654c\u4eba\u9020\u6210</c><color=blue>5%</color><color=#000000>\u706b\u5c5e\u6027<br/>\u7fa4\u4f53\u4f24\u5bb3</c>","<outline colol = white width = 2><color=#000000>\u989d\u5916\u5bf9\u6240\u6709\u654c\u4eba\u9020\u6210</c><color=blue>5%</color><color=#000000>\u96f7\u5c5e\u6027<br/>\u7fa4\u4f53\u4f24\u5bb3</c>","<outline colol = white width = 2><color=#000000>\u989d\u5916\u5bf9\u6240\u6709\u654c\u4eba\u9020\u6210</c><color=blue>5%</color><color=#000000>\u571f\u5c5e\u6027<br/>\u7fa4\u4f53\u4f24\u5bb3</c>"],t._skillIndexArr=[0,1,2,3,4,5,6,7],t._isClick=!1,t._skillIcons=[],t}return r(t,e),t.prototype.onEnable=function(){cc.systemEvent.on("SKILL_TOUCH",this.onShowSkillDesEvent,this),i.GameDataCenter.skillPanelCount++,this.loadSkillIcon(),this.skillManagerTween()},t.prototype.onDisable=function(){cc.systemEvent.off("SKILL_TOUCH",this.onShowSkillDesEvent,this)},t.prototype.start=function(){this.payCoinDisplay.string="500"},t.prototype.onClicked=function(){cc.systemEvent.emit("PLAY_SOUND","btnClick"),cc.systemEvent.emit(c.GameManager.EEventName.CLEAR_CASTLE_ENENY),cc.systemEvent.emit(c.GameManager.EEventName.GAMEPANEL_LOAD_SKILL,this._chooseIndex),i.GameDataCenter.chooseSkillId=this._chooseIndex,s.UIManager.close("Game/SkillPanel",!0),s.UIManager.open("Game/SkillSecondDialog")},t.prototype.onRandomSkillClicked=function(){cc.systemEvent.emit("PLAY_SOUND","btnClick"),this.onRandmSkillLogic()},t.prototype.onCoinChangeSkill=function(){i.GameDataCenter.coin>=500&&(i.GameDataCenter.coin-=500,this.onRandmSkillLogic())},t.prototype.onRandmSkillLogic=function(){this.unschedule(this.skillIconTween),this._skillIcons=[];for(var e=0;e<this.skillManager.childrenCount;e++)this.skillManager.children[e].destroy();var t=l.Utils.shuffle(this._skillIndexArr).slice(0,3);this.initSkillIcon(t)},t.prototype.loadSkillIcon=function(){var e=p.SkillConfig.skill[i.GameDataCenter.chooseLevel-1].skillMess[i.GameDataCenter.skillPanelCount-1];this.initSkillIcon(e)},t.prototype.onShowSkillDesEvent=function(e){var t=this._strArr[e];this.skillDesDisplay.string=t,this._chooseIndex=e},t.prototype.initSkillIcon=function(e){for(var t=0;t<e.length;t++){var o=cc.instantiate(this.skillPre);o.parent=this.skillManager,o.getComponent("SkillPre").setData(e[t]),this._skillIcons.push(o),0==t&&(o.children[0].active=!0,this.onShowSkillDesEvent(e[t]))}this.checkSkillIconTween()},t.prototype.skillManagerTween=function(){cc.tween(this.skillManager).by(.4,{x:750}).start()},t.prototype.checkSkillIconTween=function(){this.schedule(this.skillIconTween,3)},t.prototype.skillIconTween=function(){var e=this;if(0!=this._skillIcons.length){var t=0;cc.tween(this.node).repeat(3,cc.tween().delay(.2).call(function(){t++,e.skillIconJumpTween(e._skillIcons[t-1]),3==t&&(t=0)})).start()}},t.prototype.skillIconJumpTween=function(e){cc.tween(e).by(.2,{y:20}).by(.2,{y:-20}).start()},t.EEventName={SKILL_TOUCH:"SKILL_TOUCH"},a([h({type:cc.Prefab,tooltip:"\u6280\u80fdicon\u9884\u5236\u4f53"})],t.prototype,"skillPre",void 0),a([h({type:cc.RichText,tooltip:"\u6280\u80fd\u63cf\u8ff0"})],t.prototype,"skillDesDisplay",void 0),a([h({type:cc.Node,tooltip:"\u6280\u80fdicon\u7236\u8282\u70b9"})],t.prototype,"skillManager",void 0),a([h({type:cc.Node,tooltip:"\u89c6\u9891\u6362\u4e00\u6279\u6309\u94ae"})],t.prototype,"changeBtn",void 0),a([h({type:cc.Node,tooltip:"\u91d1\u5e01\u6362\u4e00\u6279\u6309\u94ae"})],t.prototype,"coinChangeBtn",void 0),a([h({type:cc.Label,tooltip:"\u6362\u4e00\u6b21\u6280\u80fd\u9700\u8981\u82b1\u8d39\u7684\u91d1\u5e01"})],t.prototype,"payCoinDisplay",void 0),a([y],t)}(cc.Component);o.SkillPanel=u,cc._RF.pop()},{"../Script/GameDataCenter":void 0,"../Script/GameManager":void 0,"../Script/UIManager":void 0,"../Script/Utils":void 0,"./Script/SkillConfig":"SkillConfig"}],SkillPre:[function(e,t,o){"use strict";cc._RF.push(t,"c6550YZoNtAZ4BpP3+jEQhQ","SkillPre");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.SkillPre=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.chooseBg=null,t.skillIconArr=[],t.skillIndex=0,t}return r(t,e),t.prototype.onEnable=function(){cc.systemEvent.on("SKILL_TOUCH",this.onSkillTouchEvent,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},t.prototype.onDisable=function(){cc.systemEvent.off("SKILL_TOUCH",this.onSkillTouchEvent,this),this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},t.prototype.onTouchStart=function(){cc.systemEvent.emit("SKILL_TOUCH",this.skillIndex),cc.systemEvent.emit("PLAY_SOUND","click")},t.prototype.setData=function(e){this.skillIndex=e,this.icon.getComponent(cc.Sprite).spriteFrame=this.skillIconArr[this.skillIndex]},t.prototype.onSkillTouchEvent=function(e){this.skillIndex!=e||this.chooseBg.active?this.chooseBg.active=!1:this.chooseBg.active=!0},a([s({type:cc.Sprite,tooltip:"\u6280\u80fd\u56fe\u7247"})],t.prototype,"icon",void 0),a([s({type:cc.Node,tooltip:"\u9009\u4e2d\u80cc\u666f"})],t.prototype,"chooseBg",void 0),a([s({type:cc.SpriteFrame,tooltip:"\u6280\u80fd\u56fe\u7247\u6570\u7ec4"})],t.prototype,"skillIconArr",void 0),a([c],t)}(cc.Component);o.SkillPre=l,cc._RF.pop()},{}],SkillSecondDialog:[function(e,t,o){"use strict";cc._RF.push(t,"e4bffql5stGY6UnKxfdJ4Au","SkillSecondDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.SkillSecondDialog=void 0;var i=e("../Script/GameDataCenter"),c=e("../Script/UIManager"),s=cc._decorator,l=s.ccclass,p=s.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skilIconArr=[],t.skillIcon_1=null,t.skillIcon_2=null,t.skillDes=null,t._strArr=["<outline colol = white width = 2><color=#000000>\u989d\u5916\u5bf9\u5f53\u524d\u5355\u4f53\u76ee\u6807\u9020\u6210</c><color=blue>20%</color><color=#000000>\u51b0\u5c5e\u6027<br/>\u5355\u4f53\u4f24\u5bb3</c>","<outline colol = white width = 2><color=#000000>\u989d\u5916\u5bf9\u5f53\u524d\u5355\u4f53\u76ee\u6807\u9020\u6210</c><color=blue>20%</color><color=#000000>\u706b\u5c5e\u6027<br/>\u5355\u4f53\u4f24\u5bb3</c>","<outline colol = white width = 2><color=#000000>\u989d\u5916\u5bf9\u5f53\u524d\u5355\u4f53\u76ee\u6807\u9020\u6210</c><color=blue>20%</color><color=#000000>\u96f7\u5c5e\u6027<br/>\u5355\u4f53\u4f24\u5bb3</c>","<outline colol = white width = 2><color=#000000>\u989d\u5916\u5bf9\u5f53\u524d\u5355\u4f53\u76ee\u6807\u9020\u6210</c><color=blue>20%</color><color=#000000>\u571f\u5c5e\u6027<br/>\u5355\u4f53\u4f24\u5bb3</c>","<outline colol = white width = 2><color=#000000>\u989d\u5916\u5bf9\u6240\u6709\u654c\u4eba\u9020\u6210</c><color=blue>10%</color><color=#000000>\u51b0\u5c5e\u6027<br/>\u7fa4\u4f53\u4f24\u5bb3</c>","<outline colol = white width = 2><color=#000000>\u989d\u5916\u5bf9\u6240\u6709\u654c\u4eba\u9020\u6210</c><color=blue>10%</color><color=#000000>\u706b\u5c5e\u6027<br/>\u7fa4\u4f53\u4f24\u5bb3</c>","<outline colol = white width = 2><color=#000000>\u989d\u5916\u5bf9\u6240\u6709\u654c\u4eba\u9020\u6210</c><color=blue>10%</color><color=#000000>\u96f7\u5c5e\u6027<br/>\u7fa4\u4f53\u4f24\u5bb3</c>","<outline colol = white width = 2><color=#000000>\u989d\u5916\u5bf9\u6240\u6709\u654c\u4eba\u9020\u6210</c><color=blue>10%</color><color=#000000>\u571f\u5c5e\u6027<br/>\u7fa4\u4f53\u4f24\u5bb3</c>"],t}return r(t,e),t.prototype.onEnable=function(){this.skillIcon_1.spriteFrame=this.skilIconArr[i.GameDataCenter.chooseSkillId],this.skillIcon_2.spriteFrame=this.skilIconArr[i.GameDataCenter.chooseSkillId],this.skillDes.string=""+this._strArr[i.GameDataCenter.chooseSkillId]},t.prototype.onClicked=function(){i.GameDataCenter.doubleDamageSkill.push(i.GameDataCenter.chooseSkillId),c.UIManager.close("Game/SkillSecondDialog")},t.prototype.onCloseClick=function(){c.UIManager.close("Game/SkillSecondDialog")},a([p({type:cc.SpriteFrame,tooltip:"\u6280\u80fd\u56fe\u6807"})],t.prototype,"skilIconArr",void 0),a([p({type:cc.Sprite,tooltip:"\u6280\u80fd\u56fe\u68071"})],t.prototype,"skillIcon_1",void 0),a([p({type:cc.Sprite,tooltip:"\u6280\u80fd\u56fe\u68072"})],t.prototype,"skillIcon_2",void 0),a([p({type:cc.RichText,tooltip:"\u6280\u80fd\u63cf\u8ff0"})],t.prototype,"skillDes",void 0),a([l],t)}(cc.Component);o.SkillSecondDialog=d,cc._RF.pop()},{"../Script/GameDataCenter":void 0,"../Script/UIManager":void 0}],StatuePanel:[function(e,t,o){"use strict";cc._RF.push(t,"41dd1ZXbTBCjqseRBpsbrli","StatuePanel");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.StatuePanel=void 0;var i=e("../Script/GameDataCenter"),c=e("../Script/UIManager"),s=cc._decorator,l=s.ccclass,p=s.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.carNodeArr=[],t.rewardDisplay=[],t.gemStone=null,t.vineArr=[],t._ratio_1=0,t._ratio_2=0,t}var o;return r(t,e),o=t,t.prototype.onEnable=function(){this.randomData(),this.onFloatRepeat(this.gemStone),this.carAct(),this.vinesTween()},t.prototype.onClicked=function(e,t){var n=this;if(o.canTouchCar){cc.systemEvent.emit("PLAY_SOUND","btnClick");var r=0;"1"==t?(r=this._ratio_1,this.onTouchScale(this.carNodeArr[0])):(r=this._ratio_2,this.onTouchScale(this.carNodeArr[1])),setTimeout(function(){cc.systemEvent.emit("SET_HERO_STATE",1,1),cc.systemEvent.emit("STATUE_ADD_DATA",r)},1800),o.canTouchCar=!1,i.GameDataCenter.roomEnemyCount--,this.scheduleOnce(function(){cc.tween(n.node).to(.1,{scale:0}).call(function(){cc.systemEvent.emit("CHECK_ROOM_LIGHT",i.GameDataCenter.curCastleIndex,i.GameDataCenter.colliderRoomIndex),c.UIManager.close("Game/StatuePanel",!0)}).start()},1.5)}},t.prototype.randomData=function(){Math.random()>.5?(this._ratio_1=.1,this._ratio_2=.05,this.rewardDisplay[0].string="+10%",this.rewardDisplay[1].string="+5%"):(this._ratio_1=.05,this._ratio_2=.1,this.rewardDisplay[0].string="+5%",this.rewardDisplay[1].string="+10%")},t.prototype.onFloatRepeat=function(e){cc.tween(e).by(1,{y:15}).by(1,{y:-15}).union().repeatForever().start()},t.prototype.carAct=function(){var e=this;cc.tween(this.carNodeArr[0]).delay(.3).to(.05,{scale:.5}).to(.05,{scale:1.2}).to(.02,{scale:1}).delay(.2).call(function(){e.carNodeArr[1].scale=1,cc.tween(e.carNodeArr[1]).by(.5,{x:91}).start()}).by(.5,{x:-89}).call(function(){o.canTouchCar=!0}).start()},t.prototype.onTouchScale=function(e){e.scale=1,e.stopAllActions(),cc.tween(e).to(.2,{scale:1.2}).to(.2,{scaleX:0}).call(function(){e.getChildByName("backCar").active=!1}).to(.2,{scaleX:1.2}).delay(.1).to(.2,{scale:1}).start()},t.prototype.vinesTween=function(){cc.tween(this.vineArr[0]).to(1,{height:406}).start(),cc.tween(this.vineArr[1]).to(1,{height:406}).start()},t.EEventName={STATUE_ADD_DATA:"STATUE_ADD_DATA"},t.canTouchCar=!1,a([p({type:cc.Node,tooltip:"\u5956\u52b1\u8282\u70b9"})],t.prototype,"carNodeArr",void 0),a([p({type:cc.Label,tooltip:"\u5956\u52b1\u7684\u5c5e\u6027\u663e\u793a"})],t.prototype,"rewardDisplay",void 0),a([p({type:cc.Node,tooltip:"\u5b9d\u77f3\u8282\u70b9"})],t.prototype,"gemStone",void 0),a([p({type:cc.Node,tooltip:"\u85e4\u8513"})],t.prototype,"vineArr",void 0),o=a([l],t)}(cc.Component);o.StatuePanel=d,cc._RF.pop()},{"../Script/GameDataCenter":void 0,"../Script/UIManager":void 0}],TouchLayer:[function(e,t,o){"use strict";cc._RF.push(t,"bb24bJwI5BJE7MVO3msAG6p","TouchLayer");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.TouchLayer=void 0;var i=e("../../Script/GameDataCenter"),c=e("../../Script/GameManager"),s=e("./PlayerState"),l=cc._decorator,p=l.ccclass,d=l.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.player=null,t.checkFightCollider=null,t.checkCastleCollider=null,t.clonePlayer=null,t.colliderArr=[],t}var o;return r(t,e),o=t,t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancelled,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancelled,this)},t.prototype.start=function(){this.colliderArr=this.node.getComponents(cc.BoxCollider)},t.prototype.onTouchStart=function(){0!=s.PlayerState.heroState&&c.GameManager.gameState!=c.EGAMESTATE.WIN&&(this.colliderArr[0].enabled=!1,this.colliderArr[1].enabled=!1)},t.prototype.onTouchMoved=function(e){if(0!=s.PlayerState.heroState&&c.GameManager.gameState!=c.EGAMESTATE.WIN){var t=this.node.parent.convertToNodeSpaceAR(e.touch.getLocation());this.node.setPosition(t),this.colliderArr[0].enabled=!1,this.colliderArr[1].enabled=!1}},t.prototype.onTouchEnded=function(){var e=this;this.colliderArr[0].enabled=!0,this.scheduleOnce(function(){e.stateReset()},.05)},t.prototype.onTouchCancelled=function(){this.stateReset()},t.prototype.stateReset=function(){if(s.PlayerState.playerCanMove){if(0==s.PlayerState.heroState)return;2==i.GameDataCenter.roomEnemyCount?(this.player.setPosition(o.nextPos.x-i.GameDataCenter.roomWidth/3,o.nextPos.y-13),s.PlayerState.moveLimit=!0,i.GameDataCenter.heroCurPos=this.node.getPosition()):1==i.GameDataCenter.roomEnemyCount?2==o.singleEnemyPosIndex?(this.player.setPosition(o.nextPos.x,o.nextPos.y-13),s.PlayerState.moveLimit=!0,i.GameDataCenter.heroCurPos=this.node.getPosition()):(this.player.setPosition(o.nextPos.x-i.GameDataCenter.roomWidth/3,o.nextPos.y-13),s.PlayerState.moveLimit=!0,i.GameDataCenter.heroCurPos=this.node.getPosition()):this.node.setPosition(i.GameDataCenter.heroCurPos),i.GameDataCenter.standRoomIndex!=i.GameDataCenter.colliderRoomIndex&&null!=i.GameDataCenter.colliderRoomIndex&&c.GameManager.gameState!=c.EGAMESTATE.WIN&&cc.systemEvent.emit("CASTLE_CHANGE"),this.colliderArr[1].enabled=!0,cc.systemEvent.emit("PLAYER_SET_POS"),cc.systemEvent.emit("ROOM_LIGHT_HIDE"),cc.systemEvent.emit("PLAY_SOUND","heroSetPos")}else this.node.setPosition(i.GameDataCenter.heroCurPos)},t.nextPos=cc.v2(0,0),t.singleEnemyPosIndex=0,a([d({type:cc.Node,tooltip:"\u73a9\u5bb6\u8282\u70b9"})],t.prototype,"player",void 0),a([d({type:cc.BoxCollider,tooltip:"\u68c0\u6d4b\u6218\u6597\u78b0\u649e\u76d2"})],t.prototype,"checkFightCollider",void 0),a([d({type:cc.BoxCollider,tooltip:"\u68c0\u6d4b\u57ce\u5821\u78b0\u649e\u76d2"})],t.prototype,"checkCastleCollider",void 0),o=a([p],t)}(cc.Component);o.TouchLayer=y,cc._RF.pop()},{"../../Script/GameDataCenter":void 0,"../../Script/GameManager":void 0,"./PlayerState":"PlayerState"}]},{},["Enemy","EnemySpineManager","GamePanel","GamePanelSkillPre","SkillPre","GuideFinger","GuidePanel","ShowDataAdd","GetPropPanel","Castle","Room","Equ_Animation","Equipment","Princess","FightLayer","Guide","HeroData","HeroFight","HeroSkillManager","HeroSpineManager","LevelConfig","MapMess","PlayerCollision","PlayerState","SkillConfig","TouchLayer","SkillPanel","AoeSkillFire","AoeSkillIce","AoeSkillThunder","SkillSecondDialog","StatuePanel"]);